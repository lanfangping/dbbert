#FORMAT=WebAnno TSV 3.3
#T_SP=custom.Span|label


#Text=Improve database performance with connection pooling - Stack Overflow Blog Reduce distractions and boost developer productivity with Stack Overflow for Teams. Now available for free What is Teams? Essays, opinions, and advice on the act of computer programming from Stack Overflow.
1-1	0-7	Improve	_	
1-2	8-16	database	_	
1-3	17-28	performance	_	
1-4	29-33	with	_	
1-5	34-44	connection	_	
1-6	45-52	pooling	_	
1-7	53-54	-	_	
1-8	55-60	Stack	_	
1-9	61-69	Overflow	_	
1-10	70-74	Blog	_	
1-11	75-81	Reduce	_	
1-12	82-94	distractions	_	
1-13	95-98	and	_	
1-14	99-104	boost	_	
1-15	105-114	developer	_	
1-16	115-127	productivity	_	
1-17	128-132	with	_	
1-18	133-138	Stack	_	
1-19	139-147	Overflow	_	
1-20	148-151	for	_	
1-21	152-157	Teams	_	
1-22	157-158	.	_	
1-23	159-162	Now	_	
1-24	163-172	available	_	
1-25	173-176	for	_	
1-26	177-181	free	_	
1-27	182-186	What	_	
1-28	187-189	is	_	
1-29	190-195	Teams	_	
1-30	195-196	?	_	
1-31	197-203	Essays	_	
1-32	203-204	,	_	
1-33	205-213	opinions	_	
1-34	213-214	,	_	
1-35	215-218	and	_	
1-36	219-225	advice	_	
1-37	226-228	on	_	
1-38	229-232	the	_	
1-39	233-236	act	_	
1-40	237-239	of	_	
1-41	240-248	computer	_	
1-42	249-260	programming	_	
1-43	261-265	from	_	
1-44	266-271	Stack	_	
1-45	272-280	Overflow	_	
1-46	280-281	.	_	

#Text=Search for: Latest Newsletter Podcast Company code-for-a-living October 14, 2020 Improve database performance with connection pooling
2-1	282-288	Search	_	
2-2	289-292	for	_	
2-3	292-293	:	_	
2-4	294-300	Latest	_	
2-5	301-311	Newsletter	_	
2-6	312-319	Podcast	_	
2-7	320-327	Company	_	
2-8	328-345	code-for-a-living	_	
2-9	346-353	October	_	
2-10	354-356	14	_	
2-11	356-357	,	_	
2-12	358-362	2020	_	
2-13	363-370	Improve	_	
2-14	371-379	database	_	
2-15	380-391	performance	_	
2-16	392-396	with	_	
2-17	397-407	connection	_	
2-18	408-415	pooling	_	

#Text=We tend to rely on caching solutions to improve database performance. Caching frequently-accessed queries in memory or via a database can optimize write/read performance and reduce network latency, especially for heavy-workload applications, such as gaming services and Q&A portals. But you can further improve performance by pooling users’ connections to a database. Client users need… Michael Aboagye We tend to rely on caching solutions to improve database performance. Caching frequently-accessed queries in memory or via a database can optimize write/read performance and reduce network latency, especially for heavy-workload applications, such as gaming services and Q&A portals. But you can further improve performance by pooling users’ connections to a database.
3-1	416-418	We	_	
3-2	419-423	tend	_	
3-3	424-426	to	_	
3-4	427-431	rely	_	
3-5	432-434	on	_	
3-6	435-442	caching	_	
3-7	443-452	solutions	_	
3-8	453-455	to	_	
3-9	456-463	improve	_	
3-10	464-472	database	_	
3-11	473-484	performance	_	
3-12	484-485	.	_	
3-13	486-493	Caching	_	
3-14	494-513	frequently-accessed	_	
3-15	514-521	queries	_	
3-16	522-524	in	_	
3-17	525-531	memory	_	
3-18	532-534	or	_	
3-19	535-538	via	_	
3-20	539-540	a	_	
3-21	541-549	database	_	
3-22	550-553	can	_	
3-23	554-562	optimize	_	
3-24	563-568	write	_	
3-25	568-569	/	_	
3-26	569-573	read	_	
3-27	574-585	performance	_	
3-28	586-589	and	_	
3-29	590-596	reduce	_	
3-30	597-604	network	_	
3-31	605-612	latency	_	
3-32	612-613	,	_	
3-33	614-624	especially	_	
3-34	625-628	for	_	
3-35	629-643	heavy-workload	_	
3-36	644-656	applications	_	
3-37	656-657	,	_	
3-38	658-662	such	_	
3-39	663-665	as	_	
3-40	666-672	gaming	_	
3-41	673-681	services	_	
3-42	682-685	and	_	
3-43	686-687	Q	_	
3-44	687-688	&	_	
3-45	688-689	A	_	
3-46	690-697	portals	_	
3-47	697-698	.	_	
3-48	699-702	But	_	
3-49	703-706	you	_	
3-50	707-710	can	_	
3-51	711-718	further	_	
3-52	719-726	improve	_	
3-53	727-738	performance	_	
3-54	739-741	by	_	
3-55	742-749	pooling	_	
3-56	750-755	users	_	
3-57	755-756	’	_	
3-58	757-768	connections	_	
3-59	769-771	to	_	
3-60	772-773	a	_	
3-61	774-782	database	_	
3-62	782-783	.	_	
3-63	784-790	Client	_	
3-64	791-796	users	_	
3-65	797-801	need	_	
3-66	801-802	…	_	
3-67	803-810	Michael	_	
3-68	811-818	Aboagye	_	
3-69	819-821	We	_	
3-70	822-826	tend	_	
3-71	827-829	to	_	
3-72	830-834	rely	_	
3-73	835-837	on	_	
3-74	838-845	caching	_	
3-75	846-855	solutions	_	
3-76	856-858	to	_	
3-77	859-866	improve	_	
3-78	867-875	database	_	
3-79	876-887	performance	_	
3-80	887-888	.	_	
3-81	889-896	Caching	_	
3-82	897-916	frequently-accessed	_	
3-83	917-924	queries	_	
3-84	925-927	in	_	
3-85	928-934	memory	_	
3-86	935-937	or	_	
3-87	938-941	via	_	
3-88	942-943	a	_	
3-89	944-952	database	_	
3-90	953-956	can	_	
3-91	957-965	optimize	_	
3-92	966-971	write	_	
3-93	971-972	/	_	
3-94	972-976	read	_	
3-95	977-988	performance	_	
3-96	989-992	and	_	
3-97	993-999	reduce	_	
3-98	1000-1007	network	_	
3-99	1008-1015	latency	_	
3-100	1015-1016	,	_	
3-101	1017-1027	especially	_	
3-102	1028-1031	for	_	
3-103	1032-1046	heavy-workload	_	
3-104	1047-1059	applications	_	
3-105	1059-1060	,	_	
3-106	1061-1065	such	_	
3-107	1066-1068	as	_	
3-108	1069-1075	gaming	_	
3-109	1076-1084	services	_	
3-110	1085-1088	and	_	
3-111	1089-1090	Q	_	
3-112	1090-1091	&	_	
3-113	1091-1092	A	_	
3-114	1093-1100	portals	_	
3-115	1100-1101	.	_	
3-116	1102-1105	But	_	
3-117	1106-1109	you	_	
3-118	1110-1113	can	_	
3-119	1114-1121	further	_	
3-120	1122-1129	improve	_	
3-121	1130-1141	performance	_	
3-122	1142-1144	by	_	
3-123	1145-1152	pooling	_	
3-124	1153-1158	users	_	
3-125	1158-1159	’	_	
3-126	1160-1171	connections	_	
3-127	1172-1174	to	_	
3-128	1175-1176	a	_	
3-129	1177-1185	database	_	
3-130	1185-1186	.	_	

#Text=Client users need to create a connection to a web service before they can perform CRUD operations. Most web services are backed by relational database servers such as Postgres or MySQL. With PostgreSQL, each new connection can take up to 1.3MB in memory. In a production environment where we expect to receive thousands or millions of concurrent connections to the backend service, this can quickly exceed your memory resources (or if you have a scalable cloud, it can get very expensive very quickly). Because each time a client attempts to access a backend service, it requires OS resources to create, maintain, and close connections to the datastore. This creates a large amount of overhead causing database performance to deteriorate.
4-1	1187-1193	Client	_	
4-2	1194-1199	users	_	
4-3	1200-1204	need	_	
4-4	1205-1207	to	_	
4-5	1208-1214	create	_	
4-6	1215-1216	a	_	
4-7	1217-1227	connection	_	
4-8	1228-1230	to	_	
4-9	1231-1232	a	_	
4-10	1233-1236	web	_	
4-11	1237-1244	service	_	
4-12	1245-1251	before	_	
4-13	1252-1256	they	_	
4-14	1257-1260	can	_	
4-15	1261-1268	perform	_	
4-16	1269-1273	CRUD	_	
4-17	1274-1284	operations	_	
4-18	1284-1285	.	_	
4-19	1286-1290	Most	_	
4-20	1291-1294	web	_	
4-21	1295-1303	services	_	
4-22	1304-1307	are	_	
4-23	1308-1314	backed	_	
4-24	1315-1317	by	_	
4-25	1318-1328	relational	_	
4-26	1329-1337	database	_	
4-27	1338-1345	servers	_	
4-28	1346-1350	such	_	
4-29	1351-1353	as	_	
4-30	1354-1362	Postgres	_	
4-31	1363-1365	or	_	
4-32	1366-1371	MySQL	_	
4-33	1371-1372	.	_	
4-34	1373-1377	With	_	
4-35	1378-1388	PostgreSQL	_	
4-36	1388-1389	,	_	
4-37	1390-1394	each	_	
4-38	1395-1398	new	_	
4-39	1399-1409	connection	_	
4-40	1410-1413	can	_	
4-41	1414-1418	take	_	
4-42	1419-1421	up	_	
4-43	1422-1424	to	_	
4-44	1425-1430	1.3MB	_	
4-45	1431-1433	in	_	
4-46	1434-1440	memory	_	
4-47	1440-1441	.	_	
4-48	1442-1444	In	_	
4-49	1445-1446	a	_	
4-50	1447-1457	production	_	
4-51	1458-1469	environment	_	
4-52	1470-1475	where	_	
4-53	1476-1478	we	_	
4-54	1479-1485	expect	_	
4-55	1486-1488	to	_	
4-56	1489-1496	receive	_	
4-57	1497-1506	thousands	_	
4-58	1507-1509	or	_	
4-59	1510-1518	millions	_	
4-60	1519-1521	of	_	
4-61	1522-1532	concurrent	_	
4-62	1533-1544	connections	_	
4-63	1545-1547	to	_	
4-64	1548-1551	the	_	
4-65	1552-1559	backend	_	
4-66	1560-1567	service	_	
4-67	1567-1568	,	_	
4-68	1569-1573	this	_	
4-69	1574-1577	can	_	
4-70	1578-1585	quickly	_	
4-71	1586-1592	exceed	_	
4-72	1593-1597	your	_	
4-73	1598-1604	memory	_	
4-74	1605-1614	resources	_	
4-75	1615-1616	(	_	
4-76	1616-1618	or	_	
4-77	1619-1621	if	_	
4-78	1622-1625	you	_	
4-79	1626-1630	have	_	
4-80	1631-1632	a	_	
4-81	1633-1641	scalable	_	
4-82	1642-1647	cloud	_	
4-83	1647-1648	,	_	
4-84	1649-1651	it	_	
4-85	1652-1655	can	_	
4-86	1656-1659	get	_	
4-87	1660-1664	very	_	
4-88	1665-1674	expensive	_	
4-89	1675-1679	very	_	
4-90	1680-1687	quickly	_	
4-91	1687-1688	)	_	
4-92	1688-1689	.	_	
4-93	1690-1697	Because	_	
4-94	1698-1702	each	_	
4-95	1703-1707	time	_	
4-96	1708-1709	a	_	
4-97	1710-1716	client	_	
4-98	1717-1725	attempts	_	
4-99	1726-1728	to	_	
4-100	1729-1735	access	_	
4-101	1736-1737	a	_	
4-102	1738-1745	backend	_	
4-103	1746-1753	service	_	
4-104	1753-1754	,	_	
4-105	1755-1757	it	_	
4-106	1758-1766	requires	_	
4-107	1767-1769	OS	_	
4-108	1770-1779	resources	_	
4-109	1780-1782	to	_	
4-110	1783-1789	create	_	
4-111	1789-1790	,	_	
4-112	1791-1799	maintain	_	
4-113	1799-1800	,	_	
4-114	1801-1804	and	_	
4-115	1805-1810	close	_	
4-116	1811-1822	connections	_	
4-117	1823-1825	to	_	
4-118	1826-1829	the	_	
4-119	1830-1839	datastore	_	
4-120	1839-1840	.	_	
4-121	1841-1845	This	_	
4-122	1846-1853	creates	_	
4-123	1854-1855	a	_	
4-124	1856-1861	large	_	
4-125	1862-1868	amount	_	
4-126	1869-1871	of	_	
4-127	1872-1880	overhead	_	
4-128	1881-1888	causing	_	
4-129	1889-1897	database	_	
4-130	1898-1909	performance	_	
4-131	1910-1912	to	_	
4-132	1913-1924	deteriorate	_	
4-133	1924-1925	.	_	

#Text=Consumers of your service expect fast response times. If that performance deteriorates, it can lead to poor user experiences, revenue losses, and even unscheduled downtime. If you expose your backend service as an API, repeated slowdowns and failures could cause cascading problems and lose you customers. Instead of opening and closing connections for every request, connection pooling uses a cache of database connections that can be reused when future requests to the database are required. It lets your database scale effectively as the data stored there and the number of clients accessing it grow. Traffic is never constant, so pooling can better manage traffic peaks without causing outages. Your production database shouldn’t be your bottleneck.
5-1	1926-1935	Consumers	_	
5-2	1936-1938	of	_	
5-3	1939-1943	your	_	
5-4	1944-1951	service	_	
5-5	1952-1958	expect	_	
5-6	1959-1963	fast	_	
5-7	1964-1972	response	_	
5-8	1973-1978	times	_	
5-9	1978-1979	.	_	
5-10	1980-1982	If	_	
5-11	1983-1987	that	_	
5-12	1988-1999	performance	_	
5-13	2000-2012	deteriorates	_	
5-14	2012-2013	,	_	
5-15	2014-2016	it	_	
5-16	2017-2020	can	_	
5-17	2021-2025	lead	_	
5-18	2026-2028	to	_	
5-19	2029-2033	poor	_	
5-20	2034-2038	user	_	
5-21	2039-2050	experiences	_	
5-22	2050-2051	,	_	
5-23	2052-2059	revenue	_	
5-24	2060-2066	losses	_	
5-25	2066-2067	,	_	
5-26	2068-2071	and	_	
5-27	2072-2076	even	_	
5-28	2077-2088	unscheduled	_	
5-29	2089-2097	downtime	_	
5-30	2097-2098	.	_	
5-31	2099-2101	If	_	
5-32	2102-2105	you	_	
5-33	2106-2112	expose	_	
5-34	2113-2117	your	_	
5-35	2118-2125	backend	_	
5-36	2126-2133	service	_	
5-37	2134-2136	as	_	
5-38	2137-2139	an	_	
5-39	2140-2143	API	_	
5-40	2143-2144	,	_	
5-41	2145-2153	repeated	_	
5-42	2154-2163	slowdowns	_	
5-43	2164-2167	and	_	
5-44	2168-2176	failures	_	
5-45	2177-2182	could	_	
5-46	2183-2188	cause	_	
5-47	2189-2198	cascading	_	
5-48	2199-2207	problems	_	
5-49	2208-2211	and	_	
5-50	2212-2216	lose	_	
5-51	2217-2220	you	_	
5-52	2221-2230	customers	_	
5-53	2230-2231	.	_	
5-54	2232-2239	Instead	_	
5-55	2240-2242	of	_	
5-56	2243-2250	opening	_	
5-57	2251-2254	and	_	
5-58	2255-2262	closing	_	
5-59	2263-2274	connections	_	
5-60	2275-2278	for	_	
5-61	2279-2284	every	_	
5-62	2285-2292	request	_	
5-63	2292-2293	,	_	
5-64	2294-2304	connection	_	
5-65	2305-2312	pooling	_	
5-66	2313-2317	uses	_	
5-67	2318-2319	a	_	
5-68	2320-2325	cache	_	
5-69	2326-2328	of	_	
5-70	2329-2337	database	_	
5-71	2338-2349	connections	_	
5-72	2350-2354	that	_	
5-73	2355-2358	can	_	
5-74	2359-2361	be	_	
5-75	2362-2368	reused	_	
5-76	2369-2373	when	_	
5-77	2374-2380	future	_	
5-78	2381-2389	requests	_	
5-79	2390-2392	to	_	
5-80	2393-2396	the	_	
5-81	2397-2405	database	_	
5-82	2406-2409	are	_	
5-83	2410-2418	required	_	
5-84	2418-2419	.	_	
5-85	2420-2422	It	_	
5-86	2423-2427	lets	_	
5-87	2428-2432	your	_	
5-88	2433-2441	database	_	
5-89	2442-2447	scale	_	
5-90	2448-2459	effectively	_	
5-91	2460-2462	as	_	
5-92	2463-2466	the	_	
5-93	2467-2471	data	_	
5-94	2472-2478	stored	_	
5-95	2479-2484	there	_	
5-96	2485-2488	and	_	
5-97	2489-2492	the	_	
5-98	2493-2499	number	_	
5-99	2500-2502	of	_	
5-100	2503-2510	clients	_	
5-101	2511-2520	accessing	_	
5-102	2521-2523	it	_	
5-103	2524-2528	grow	_	
5-104	2528-2529	.	_	
5-105	2530-2537	Traffic	_	
5-106	2538-2540	is	_	
5-107	2541-2546	never	_	
5-108	2547-2555	constant	_	
5-109	2555-2556	,	_	
5-110	2557-2559	so	_	
5-111	2560-2567	pooling	_	
5-112	2568-2571	can	_	
5-113	2572-2578	better	_	
5-114	2579-2585	manage	_	
5-115	2586-2593	traffic	_	
5-116	2594-2599	peaks	_	
5-117	2600-2607	without	_	
5-118	2608-2615	causing	_	
5-119	2616-2623	outages	_	
5-120	2623-2624	.	_	
5-121	2625-2629	Your	_	
5-122	2630-2640	production	_	
5-123	2641-2649	database	_	
5-124	2650-2657	shouldn	_	
5-125	2657-2658	’	_	
5-126	2658-2659	t	_	
5-127	2660-2662	be	_	
5-128	2663-2667	your	_	
5-129	2668-2678	bottleneck	_	
5-130	2678-2679	.	_	

#Text=In this article, we will explore how we can use connection pooling middleware like pgpool and pgbouncer to reduce overhead and network latency. For illustration purposes, I will use pgpool-II and pgbouncer to explain concepts of connection pooling and compare which one is more effective in pooling connections because some connection poolers can even affect database performance. We will look at how to use pgbench to benchmark Postgres databases since it is the standard tool provided by PostgreSQL. Different hardware provides different benchmarking results based on the plan you set. For the  tests below, I’m using these specifications.
6-1	2680-2682	In	_	
6-2	2683-2687	this	_	
6-3	2688-2695	article	_	
6-4	2695-2696	,	_	
6-5	2697-2699	we	_	
6-6	2700-2704	will	_	
6-7	2705-2712	explore	_	
6-8	2713-2716	how	_	
6-9	2717-2719	we	_	
6-10	2720-2723	can	_	
6-11	2724-2727	use	_	
6-12	2728-2738	connection	_	
6-13	2739-2746	pooling	_	
6-14	2747-2757	middleware	_	
6-15	2758-2762	like	_	
6-16	2763-2769	pgpool	_	
6-17	2770-2773	and	_	
6-18	2774-2783	pgbouncer	_	
6-19	2784-2786	to	_	
6-20	2787-2793	reduce	_	
6-21	2794-2802	overhead	_	
6-22	2803-2806	and	_	
6-23	2807-2814	network	_	
6-24	2815-2822	latency	_	
6-25	2822-2823	.	_	
6-26	2824-2827	For	_	
6-27	2828-2840	illustration	_	
6-28	2841-2849	purposes	_	
6-29	2849-2850	,	_	
6-30	2851-2852	I	_	
6-31	2853-2857	will	_	
6-32	2858-2861	use	_	
6-33	2862-2871	pgpool-II	_	
6-34	2872-2875	and	_	
6-35	2876-2885	pgbouncer	_	
6-36	2886-2888	to	_	
6-37	2889-2896	explain	_	
6-38	2897-2905	concepts	_	
6-39	2906-2908	of	_	
6-40	2909-2919	connection	_	
6-41	2920-2927	pooling	_	
6-42	2928-2931	and	_	
6-43	2932-2939	compare	_	
6-44	2940-2945	which	_	
6-45	2946-2949	one	_	
6-46	2950-2952	is	_	
6-47	2953-2957	more	_	
6-48	2958-2967	effective	_	
6-49	2968-2970	in	_	
6-50	2971-2978	pooling	_	
6-51	2979-2990	connections	_	
6-52	2991-2998	because	_	
6-53	2999-3003	some	_	
6-54	3004-3014	connection	_	
6-55	3015-3022	poolers	_	
6-56	3023-3026	can	_	
6-57	3027-3031	even	_	
6-58	3032-3038	affect	_	
6-59	3039-3047	database	_	
6-60	3048-3059	performance	_	
6-61	3059-3060	.	_	
6-62	3061-3063	We	_	
6-63	3064-3068	will	_	
6-64	3069-3073	look	_	
6-65	3074-3076	at	_	
6-66	3077-3080	how	_	
6-67	3081-3083	to	_	
6-68	3084-3087	use	_	
6-69	3088-3095	pgbench	_	
6-70	3096-3098	to	_	
6-71	3099-3108	benchmark	_	
6-72	3109-3117	Postgres	_	
6-73	3118-3127	databases	_	
6-74	3128-3133	since	_	
6-75	3134-3136	it	_	
6-76	3137-3139	is	_	
6-77	3140-3143	the	_	
6-78	3144-3152	standard	_	
6-79	3153-3157	tool	_	
6-80	3158-3166	provided	_	
6-81	3167-3169	by	_	
6-82	3170-3180	PostgreSQL	_	
6-83	3180-3181	.	_	
6-84	3182-3191	Different	_	
6-85	3192-3200	hardware	_	
6-86	3201-3209	provides	_	
6-87	3210-3219	different	_	
6-88	3220-3232	benchmarking	_	
6-89	3233-3240	results	_	
6-90	3241-3246	based	_	
6-91	3247-3249	on	_	
6-92	3250-3253	the	_	
6-93	3254-3258	plan	_	
6-94	3259-3262	you	_	
6-95	3263-3266	set	_	
6-96	3266-3267	.	_	
6-97	3268-3271	For	_	
6-98	3272-3275	the	_	
6-99	3275-3276	 	_	
6-100	3277-3282	tests	_	
6-101	3283-3288	below	_	
6-102	3288-3289	,	_	
6-103	3290-3291	I	_	
6-104	3291-3292	’	_	
6-105	3292-3293	m	_	
6-106	3294-3299	using	_	
6-107	3300-3305	these	_	
6-108	3306-3320	specifications	_	
6-109	3320-3321	.	_	

#Text=Specs of my test machine: Linode Server: Ubuntu 16 – 64 bit ( Virtual Machine)  Postgres version 9.5Memory: 2GBDatabase size: 800MBStorage: 2GB
7-1	3322-3327	Specs	_	
7-2	3328-3330	of	_	
7-3	3331-3333	my	_	
7-4	3334-3338	test	_	
7-5	3339-3346	machine	_	
7-6	3346-3347	:	_	
7-7	3348-3354	Linode	_	
7-8	3355-3361	Server	_	
7-9	3361-3362	:	_	
7-10	3363-3369	Ubuntu	_	
7-11	3370-3372	16	_	
7-12	3373-3374	–	_	
7-13	3375-3377	64	_	
7-14	3378-3381	bit	_	
7-15	3382-3383	(	_	
7-16	3384-3391	Virtual	_	
7-17	3392-3399	Machine	_	
7-18	3399-3400	)	_	
7-19	3400-3402	  	_	
7-20	3402-3410	Postgres	_	
7-21	3411-3418	version	_	
7-22	3419-3428	9.5Memory	_	
7-23	3428-3429	:	_	
7-24	3430-3441	2GBDatabase	_	
7-25	3442-3446	size	_	
7-26	3446-3447	:	_	
7-27	3448-3460	800MBStorage	_	
7-28	3460-3461	:	_	
7-29	3462-3465	2GB	_	

#Text=Also it is important to isolate the Postgres database server from other frameworks like logstash shipper and other servers for collecting performance metrics because most of these components consume more memory and will affect the test results. Creating a pooled connection Connecting to a backend service is an expensive operation, as it consists of the following steps: Open a connection to the database using the database driver.Open a TCP socket for CRUD operations Perform CRUD operations over the socket.  Close the connection.Close the socket.
8-1	3466-3470	Also	_	
8-2	3471-3473	it	_	
8-3	3474-3476	is	_	
8-4	3477-3486	important	_	
8-5	3487-3489	to	_	
8-6	3490-3497	isolate	_	
8-7	3498-3501	the	_	
8-8	3502-3510	Postgres	_	
8-9	3511-3519	database	_	
8-10	3520-3526	server	_	
8-11	3527-3531	from	_	
8-12	3532-3537	other	_	
8-13	3538-3548	frameworks	_	
8-14	3549-3553	like	_	
8-15	3554-3562	logstash	_	
8-16	3563-3570	shipper	_	
8-17	3571-3574	and	_	
8-18	3575-3580	other	_	
8-19	3581-3588	servers	_	
8-20	3589-3592	for	_	
8-21	3593-3603	collecting	_	
8-22	3604-3615	performance	_	
8-23	3616-3623	metrics	_	
8-24	3624-3631	because	_	
8-25	3632-3636	most	_	
8-26	3637-3639	of	_	
8-27	3640-3645	these	_	
8-28	3646-3656	components	_	
8-29	3657-3664	consume	_	
8-30	3665-3669	more	_	
8-31	3670-3676	memory	_	
8-32	3677-3680	and	_	
8-33	3681-3685	will	_	
8-34	3686-3692	affect	_	
8-35	3693-3696	the	_	
8-36	3697-3701	test	_	
8-37	3702-3709	results	_	
8-38	3709-3710	.	_	
8-39	3711-3719	Creating	_	
8-40	3720-3721	a	_	
8-41	3722-3728	pooled	_	
8-42	3729-3739	connection	_	
8-43	3740-3750	Connecting	_	
8-44	3751-3753	to	_	
8-45	3754-3755	a	_	
8-46	3756-3763	backend	_	
8-47	3764-3771	service	_	
8-48	3772-3774	is	_	
8-49	3775-3777	an	_	
8-50	3778-3787	expensive	_	
8-51	3788-3797	operation	_	
8-52	3797-3798	,	_	
8-53	3799-3801	as	_	
8-54	3802-3804	it	_	
8-55	3805-3813	consists	_	
8-56	3814-3816	of	_	
8-57	3817-3820	the	_	
8-58	3821-3830	following	_	
8-59	3831-3836	steps	_	
8-60	3836-3837	:	_	
8-61	3838-3842	Open	_	
8-62	3843-3844	a	_	
8-63	3845-3855	connection	_	
8-64	3856-3858	to	_	
8-65	3859-3862	the	_	
8-66	3863-3871	database	_	
8-67	3872-3877	using	_	
8-68	3878-3881	the	_	
8-69	3882-3890	database	_	
8-70	3891-3902	driver.Open	_	
8-71	3903-3904	a	_	
8-72	3905-3908	TCP	_	
8-73	3909-3915	socket	_	
8-74	3916-3919	for	_	
8-75	3920-3924	CRUD	_	
8-76	3925-3935	operations	_	
8-77	3935-3936	 	_	
8-78	3936-3943	Perform	_	
8-79	3944-3948	CRUD	_	
8-80	3949-3959	operations	_	
8-81	3960-3964	over	_	
8-82	3965-3968	the	_	
8-83	3969-3975	socket	_	
8-84	3975-3976	.	_	
8-85	3976-3978	  	_	
8-86	3978-3983	Close	_	
8-87	3984-3987	the	_	
8-88	3988-4004	connection.Close	_	
8-89	4005-4008	the	_	
8-90	4009-4015	socket	_	
8-91	4015-4016	.	_	

#Text=In a production environment where we expect thousands of concurrent open and close connections from clients, doing the above steps for every single connection can cause the database to perform poorly. We can resolve this problem by pooling connections from clients. Instead of creating a new connection with every request, connection poolers reuse some existing connections. Thus there is no need to perform multiple expensive full database trips by opening and closing connections to backend service. It prevents the overhead of creating a new connection to the database every time there is a request for a database connection with the same properties (i.e name, database, protocol version).
9-1	4017-4019	In	_	
9-2	4020-4021	a	_	
9-3	4022-4032	production	_	
9-4	4033-4044	environment	_	
9-5	4045-4050	where	_	
9-6	4051-4053	we	_	
9-7	4054-4060	expect	_	
9-8	4061-4070	thousands	_	
9-9	4071-4073	of	_	
9-10	4074-4084	concurrent	_	
9-11	4085-4089	open	_	
9-12	4090-4093	and	_	
9-13	4094-4099	close	_	
9-14	4100-4111	connections	_	
9-15	4112-4116	from	_	
9-16	4117-4124	clients	_	
9-17	4124-4125	,	_	
9-18	4126-4131	doing	_	
9-19	4132-4135	the	_	
9-20	4136-4141	above	_	
9-21	4142-4147	steps	_	
9-22	4148-4151	for	_	
9-23	4152-4157	every	_	
9-24	4158-4164	single	_	
9-25	4165-4175	connection	_	
9-26	4176-4179	can	_	
9-27	4180-4185	cause	_	
9-28	4186-4189	the	_	
9-29	4190-4198	database	_	
9-30	4199-4201	to	_	
9-31	4202-4209	perform	_	
9-32	4210-4216	poorly	_	
9-33	4216-4217	.	_	
9-34	4218-4220	We	_	
9-35	4221-4224	can	_	
9-36	4225-4232	resolve	_	
9-37	4233-4237	this	_	
9-38	4238-4245	problem	_	
9-39	4246-4248	by	_	
9-40	4249-4256	pooling	_	
9-41	4257-4268	connections	_	
9-42	4269-4273	from	_	
9-43	4274-4281	clients	_	
9-44	4281-4282	.	_	
9-45	4283-4290	Instead	_	
9-46	4291-4293	of	_	
9-47	4294-4302	creating	_	
9-48	4303-4304	a	_	
9-49	4305-4308	new	_	
9-50	4309-4319	connection	_	
9-51	4320-4324	with	_	
9-52	4325-4330	every	_	
9-53	4331-4338	request	_	
9-54	4338-4339	,	_	
9-55	4340-4350	connection	_	
9-56	4351-4358	poolers	_	
9-57	4359-4364	reuse	_	
9-58	4365-4369	some	_	
9-59	4370-4378	existing	_	
9-60	4379-4390	connections	_	
9-61	4390-4391	.	_	
9-62	4392-4396	Thus	_	
9-63	4397-4402	there	_	
9-64	4403-4405	is	_	
9-65	4406-4408	no	_	
9-66	4409-4413	need	_	
9-67	4414-4416	to	_	
9-68	4417-4424	perform	_	
9-69	4425-4433	multiple	_	
9-70	4434-4443	expensive	_	
9-71	4444-4448	full	_	
9-72	4449-4457	database	_	
9-73	4458-4463	trips	_	
9-74	4464-4466	by	_	
9-75	4467-4474	opening	_	
9-76	4475-4478	and	_	
9-77	4479-4486	closing	_	
9-78	4487-4498	connections	_	
9-79	4499-4501	to	_	
9-80	4502-4509	backend	_	
9-81	4510-4517	service	_	
9-82	4517-4518	.	_	
9-83	4519-4521	It	_	
9-84	4522-4530	prevents	_	
9-85	4531-4534	the	_	
9-86	4535-4543	overhead	_	
9-87	4544-4546	of	_	
9-88	4547-4555	creating	_	
9-89	4556-4557	a	_	
9-90	4558-4561	new	_	
9-91	4562-4572	connection	_	
9-92	4573-4575	to	_	
9-93	4576-4579	the	_	
9-94	4580-4588	database	_	
9-95	4589-4594	every	_	
9-96	4595-4599	time	_	
9-97	4600-4605	there	_	
9-98	4606-4608	is	_	
9-99	4609-4610	a	_	
9-100	4611-4618	request	_	
9-101	4619-4622	for	_	
9-102	4623-4624	a	_	
9-103	4625-4633	database	_	
9-104	4634-4644	connection	_	
9-105	4645-4649	with	_	
9-106	4650-4653	the	_	
9-107	4654-4658	same	_	
9-108	4659-4669	properties	_	
9-109	4670-4671	(	_	
9-110	4671-4674	i.e	_	
9-111	4675-4679	name	_	
9-112	4679-4680	,	_	
9-113	4681-4689	database	_	
9-114	4689-4690	,	_	
9-115	4691-4699	protocol	_	
9-116	4700-4707	version	_	
9-117	4707-4708	)	_	
9-118	4708-4709	.	_	

#Text=Pooling middleware like pgbouncer comes with a pool manager. Usually, the connection pool manager maintains a pool of open database connections. You can not pool connections without a pool manager. A pool contains two types of connections: Active connection: In use by the application.Idle connection:  Available for use by the application.
10-1	4710-4717	Pooling	_	
10-2	4718-4728	middleware	_	
10-3	4729-4733	like	_	
10-4	4734-4743	pgbouncer	_	
10-5	4744-4749	comes	_	
10-6	4750-4754	with	_	
10-7	4755-4756	a	_	
10-8	4757-4761	pool	_	
10-9	4762-4769	manager	_	
10-10	4769-4770	.	_	
10-11	4771-4778	Usually	_	
10-12	4778-4779	,	_	
10-13	4780-4783	the	_	
10-14	4784-4794	connection	_	
10-15	4795-4799	pool	_	
10-16	4800-4807	manager	_	
10-17	4808-4817	maintains	_	
10-18	4818-4819	a	_	
10-19	4820-4824	pool	_	
10-20	4825-4827	of	_	
10-21	4828-4832	open	_	
10-22	4833-4841	database	_	
10-23	4842-4853	connections	_	
10-24	4853-4854	.	_	
10-25	4855-4858	You	_	
10-26	4859-4862	can	_	
10-27	4863-4866	not	_	
10-28	4867-4871	pool	_	
10-29	4872-4883	connections	_	
10-30	4884-4891	without	_	
10-31	4892-4893	a	_	
10-32	4894-4898	pool	_	
10-33	4899-4906	manager	_	
10-34	4906-4907	.	_	
10-35	4908-4909	A	_	
10-36	4910-4914	pool	_	
10-37	4915-4923	contains	_	
10-38	4924-4927	two	_	
10-39	4928-4933	types	_	
10-40	4934-4936	of	_	
10-41	4937-4948	connections	_	
10-42	4948-4949	:	_	
10-43	4950-4956	Active	_	
10-44	4957-4967	connection	_	
10-45	4967-4968	:	_	
10-46	4969-4971	In	_	
10-47	4972-4975	use	_	
10-48	4976-4978	by	_	
10-49	4979-4982	the	_	
10-50	4983-4999	application.Idle	_	
10-51	5000-5010	connection	_	
10-52	5010-5011	:	_	
10-53	5011-5012	 	_	
10-54	5013-5022	Available	_	
10-55	5023-5026	for	_	
10-56	5027-5030	use	_	
10-57	5031-5033	by	_	
10-58	5034-5037	the	_	
10-59	5038-5049	application	_	
10-60	5049-5050	.	_	

#Text=When a new request to access data from the backend service comes in, the pool manager checks if the pool contains any unused connection and returns one if available. If all the connections in the pool are active, then a new connection is created and added to the pool by the pool manager. When the pool reaches its maximum size, all new connections are queued until a connection in the pool becomes available. Although most databases do not have an in-built connection pooling system, there are middleware solutions that we can use to pool connections from clients. For a PostgreSQL database server, both pgbouncer and pgpool-II can serve as a pooling interface between a web service and a Postgres database. Both utilities use the same logic to pool connections from clients.
11-1	5051-5055	When	_	
11-2	5056-5057	a	_	
11-3	5058-5061	new	_	
11-4	5062-5069	request	_	
11-5	5070-5072	to	_	
11-6	5073-5079	access	_	
11-7	5080-5084	data	_	
11-8	5085-5089	from	_	
11-9	5090-5093	the	_	
11-10	5094-5101	backend	_	
11-11	5102-5109	service	_	
11-12	5110-5115	comes	_	
11-13	5116-5118	in	_	
11-14	5118-5119	,	_	
11-15	5120-5123	the	_	
11-16	5124-5128	pool	_	
11-17	5129-5136	manager	_	
11-18	5137-5143	checks	_	
11-19	5144-5146	if	_	
11-20	5147-5150	the	_	
11-21	5151-5155	pool	_	
11-22	5156-5164	contains	_	
11-23	5165-5168	any	_	
11-24	5169-5175	unused	_	
11-25	5176-5186	connection	_	
11-26	5187-5190	and	_	
11-27	5191-5198	returns	_	
11-28	5199-5202	one	_	
11-29	5203-5205	if	_	
11-30	5206-5215	available	_	
11-31	5215-5216	.	_	
11-32	5217-5219	If	_	
11-33	5220-5223	all	_	
11-34	5224-5227	the	_	
11-35	5228-5239	connections	_	
11-36	5240-5242	in	_	
11-37	5243-5246	the	_	
11-38	5247-5251	pool	_	
11-39	5252-5255	are	_	
11-40	5256-5262	active	_	
11-41	5262-5263	,	_	
11-42	5264-5268	then	_	
11-43	5269-5270	a	_	
11-44	5271-5274	new	_	
11-45	5275-5285	connection	_	
11-46	5286-5288	is	_	
11-47	5289-5296	created	_	
11-48	5297-5300	and	_	
11-49	5301-5306	added	_	
11-50	5307-5309	to	_	
11-51	5310-5313	the	_	
11-52	5314-5318	pool	_	
11-53	5319-5321	by	_	
11-54	5322-5325	the	_	
11-55	5326-5330	pool	_	
11-56	5331-5338	manager	_	
11-57	5338-5339	.	_	
11-58	5340-5344	When	_	
11-59	5345-5348	the	_	
11-60	5349-5353	pool	_	
11-61	5354-5361	reaches	_	
11-62	5362-5365	its	_	
11-63	5366-5373	maximum	_	
11-64	5374-5378	size	_	
11-65	5378-5379	,	_	
11-66	5380-5383	all	_	
11-67	5384-5387	new	_	
11-68	5388-5399	connections	_	
11-69	5400-5403	are	_	
11-70	5404-5410	queued	_	
11-71	5411-5416	until	_	
11-72	5417-5418	a	_	
11-73	5419-5429	connection	_	
11-74	5430-5432	in	_	
11-75	5433-5436	the	_	
11-76	5437-5441	pool	_	
11-77	5442-5449	becomes	_	
11-78	5450-5459	available	_	
11-79	5459-5460	.	_	
11-80	5461-5469	Although	_	
11-81	5470-5474	most	_	
11-82	5475-5484	databases	_	
11-83	5485-5487	do	_	
11-84	5488-5491	not	_	
11-85	5492-5496	have	_	
11-86	5497-5499	an	_	
11-87	5500-5508	in-built	_	
11-88	5509-5519	connection	_	
11-89	5520-5527	pooling	_	
11-90	5528-5534	system	_	
11-91	5534-5535	,	_	
11-92	5536-5541	there	_	
11-93	5542-5545	are	_	
11-94	5546-5556	middleware	_	
11-95	5557-5566	solutions	_	
11-96	5567-5571	that	_	
11-97	5572-5574	we	_	
11-98	5575-5578	can	_	
11-99	5579-5582	use	_	
11-100	5583-5585	to	_	
11-101	5586-5590	pool	_	
11-102	5591-5602	connections	_	
11-103	5603-5607	from	_	
11-104	5608-5615	clients	_	
11-105	5615-5616	.	_	
11-106	5617-5620	For	_	
11-107	5621-5622	a	_	
11-108	5623-5633	PostgreSQL	_	
11-109	5634-5642	database	_	
11-110	5643-5649	server	_	
11-111	5649-5650	,	_	
11-112	5651-5655	both	_	
11-113	5656-5665	pgbouncer	_	
11-114	5666-5669	and	_	
11-115	5670-5679	pgpool-II	_	
11-116	5680-5683	can	_	
11-117	5684-5689	serve	_	
11-118	5690-5692	as	_	
11-119	5693-5694	a	_	
11-120	5695-5702	pooling	_	
11-121	5703-5712	interface	_	
11-122	5713-5720	between	_	
11-123	5721-5722	a	_	
11-124	5723-5726	web	_	
11-125	5727-5734	service	_	
11-126	5735-5738	and	_	
11-127	5739-5740	a	_	
11-128	5741-5749	Postgres	_	
11-129	5750-5758	database	_	
11-130	5758-5759	.	_	
11-131	5760-5764	Both	_	
11-132	5765-5774	utilities	_	
11-133	5775-5778	use	_	
11-134	5779-5782	the	_	
11-135	5783-5787	same	_	
11-136	5788-5793	logic	_	
11-137	5794-5796	to	_	
11-138	5797-5801	pool	_	
11-139	5802-5813	connections	_	
11-140	5814-5818	from	_	
11-141	5819-5826	clients	_	
11-142	5826-5827	.	_	

#Text=pgpool-II offers more features beyond connection pooling, such as replication, load balancing, and parallel query features. How do you add connection pooling? Is it as simple as installing the utilities? Two ways to integrate a connection pooler There are two ways of implementing connection pooling for PostgreSQL application: As an external service or middleware such as pgbouncer
12-1	5828-5837	pgpool-II	_	
12-2	5838-5844	offers	_	
12-3	5845-5849	more	_	
12-4	5850-5858	features	_	
12-5	5859-5865	beyond	_	
12-6	5866-5876	connection	_	
12-7	5877-5884	pooling	_	
12-8	5884-5885	,	_	
12-9	5886-5890	such	_	
12-10	5891-5893	as	_	
12-11	5894-5905	replication	_	
12-12	5905-5906	,	_	
12-13	5907-5911	load	_	
12-14	5912-5921	balancing	_	
12-15	5921-5922	,	_	
12-16	5923-5926	and	_	
12-17	5927-5935	parallel	_	
12-18	5936-5941	query	_	
12-19	5942-5950	features	_	
12-20	5950-5951	.	_	
12-21	5952-5955	How	_	
12-22	5956-5958	do	_	
12-23	5959-5962	you	_	
12-24	5963-5966	add	_	
12-25	5967-5977	connection	_	
12-26	5978-5985	pooling	_	
12-27	5985-5986	?	_	
12-28	5987-5989	Is	_	
12-29	5990-5992	it	_	
12-30	5993-5995	as	_	
12-31	5996-6002	simple	_	
12-32	6003-6005	as	_	
12-33	6006-6016	installing	_	
12-34	6017-6020	the	_	
12-35	6021-6030	utilities	_	
12-36	6030-6031	?	_	
12-37	6032-6035	Two	_	
12-38	6036-6040	ways	_	
12-39	6041-6043	to	_	
12-40	6044-6053	integrate	_	
12-41	6054-6055	a	_	
12-42	6056-6066	connection	_	
12-43	6067-6073	pooler	_	
12-44	6074-6079	There	_	
12-45	6080-6083	are	_	
12-46	6084-6087	two	_	
12-47	6088-6092	ways	_	
12-48	6093-6095	of	_	
12-49	6096-6108	implementing	_	
12-50	6109-6119	connection	_	
12-51	6120-6127	pooling	_	
12-52	6128-6131	for	_	
12-53	6132-6142	PostgreSQL	_	
12-54	6143-6154	application	_	
12-55	6154-6155	:	_	
12-56	6156-6158	As	_	
12-57	6159-6161	an	_	
12-58	6162-6170	external	_	
12-59	6171-6178	service	_	
12-60	6179-6181	or	_	
12-61	6182-6192	middleware	_	
12-62	6193-6197	such	_	
12-63	6198-6200	as	_	
12-64	6201-6210	pgbouncer	_	

#Text=Connection poolers such as pgbouncer and pgpool-II can be used to pool connections from clients to a PostgreSQL database. The connection pooler sits in between the application and the database server. Pgbouncer or pgpool-II can be configured in a way to relay requests from the application to the database server. Client-side libraries such as c3p0 There exist libraries such as c3p0 which extend database driver functionality to include connection pooling support.
13-1	6211-6221	Connection	_	
13-2	6222-6229	poolers	_	
13-3	6230-6234	such	_	
13-4	6235-6237	as	_	
13-5	6238-6247	pgbouncer	_	
13-6	6248-6251	and	_	
13-7	6252-6261	pgpool-II	_	
13-8	6262-6265	can	_	
13-9	6266-6268	be	_	
13-10	6269-6273	used	_	
13-11	6274-6276	to	_	
13-12	6277-6281	pool	_	
13-13	6282-6293	connections	_	
13-14	6294-6298	from	_	
13-15	6299-6306	clients	_	
13-16	6307-6309	to	_	
13-17	6310-6311	a	_	
13-18	6312-6322	PostgreSQL	_	
13-19	6323-6331	database	_	
13-20	6331-6332	.	_	
13-21	6333-6336	The	_	
13-22	6337-6347	connection	_	
13-23	6348-6354	pooler	_	
13-24	6355-6359	sits	_	
13-25	6360-6362	in	_	
13-26	6363-6370	between	_	
13-27	6371-6374	the	_	
13-28	6375-6386	application	_	
13-29	6387-6390	and	_	
13-30	6391-6394	the	_	
13-31	6395-6403	database	_	
13-32	6404-6410	server	_	
13-33	6410-6411	.	_	
13-34	6412-6421	Pgbouncer	_	
13-35	6422-6424	or	_	
13-36	6425-6434	pgpool-II	_	
13-37	6435-6438	can	_	
13-38	6439-6441	be	_	
13-39	6442-6452	configured	_	
13-40	6453-6455	in	_	
13-41	6456-6457	a	_	
13-42	6458-6461	way	_	
13-43	6462-6464	to	_	
13-44	6465-6470	relay	_	
13-45	6471-6479	requests	_	
13-46	6480-6484	from	_	
13-47	6485-6488	the	_	
13-48	6489-6500	application	_	
13-49	6501-6503	to	_	
13-50	6504-6507	the	_	
13-51	6508-6516	database	_	
13-52	6517-6523	server	_	
13-53	6523-6524	.	_	
13-54	6525-6536	Client-side	_	
13-55	6537-6546	libraries	_	
13-56	6547-6551	such	_	
13-57	6552-6554	as	_	
13-58	6555-6559	c3p0	_	
13-59	6560-6565	There	_	
13-60	6566-6571	exist	_	
13-61	6572-6581	libraries	_	
13-62	6582-6586	such	_	
13-63	6587-6589	as	_	
13-64	6590-6594	c3p0	_	
13-65	6595-6600	which	_	
13-66	6601-6607	extend	_	
13-67	6608-6616	database	_	
13-68	6617-6623	driver	_	
13-69	6624-6637	functionality	_	
13-70	6638-6640	to	_	
13-71	6641-6648	include	_	
13-72	6649-6659	connection	_	
13-73	6660-6667	pooling	_	
13-74	6668-6675	support	_	
13-75	6675-6676	.	_	

#Text=However, the best way to implement connection pooling for applications is to make use of an external service or middleware since it is easier to set up and manage. In addition external middleware like pgpool2 provides other features such as load balancing apart from pooling connections. Now let’s take a deeper look at what happens when a backend service connects to a Postgres database, both with and without pooling. Scaling database performance without connection pooling
14-1	6677-6684	However	_	
14-2	6684-6685	,	_	
14-3	6686-6689	the	_	
14-4	6690-6694	best	_	
14-5	6695-6698	way	_	
14-6	6699-6701	to	_	
14-7	6702-6711	implement	_	
14-8	6712-6722	connection	_	
14-9	6723-6730	pooling	_	
14-10	6731-6734	for	_	
14-11	6735-6747	applications	_	
14-12	6748-6750	is	_	
14-13	6751-6753	to	_	
14-14	6754-6758	make	_	
14-15	6759-6762	use	_	
14-16	6763-6765	of	_	
14-17	6766-6768	an	_	
14-18	6769-6777	external	_	
14-19	6778-6785	service	_	
14-20	6786-6788	or	_	
14-21	6789-6799	middleware	_	
14-22	6800-6805	since	_	
14-23	6806-6808	it	_	
14-24	6809-6811	is	_	
14-25	6812-6818	easier	_	
14-26	6819-6821	to	_	
14-27	6822-6825	set	_	
14-28	6826-6828	up	_	
14-29	6829-6832	and	_	
14-30	6833-6839	manage	_	
14-31	6839-6840	.	_	
14-32	6841-6843	In	_	
14-33	6844-6852	addition	_	
14-34	6853-6861	external	_	
14-35	6862-6872	middleware	_	
14-36	6873-6877	like	_	
14-37	6878-6885	pgpool2	_	
14-38	6886-6894	provides	_	
14-39	6895-6900	other	_	
14-40	6901-6909	features	_	
14-41	6910-6914	such	_	
14-42	6915-6917	as	_	
14-43	6918-6922	load	_	
14-44	6923-6932	balancing	_	
14-45	6933-6938	apart	_	
14-46	6939-6943	from	_	
14-47	6944-6951	pooling	_	
14-48	6952-6963	connections	_	
14-49	6963-6964	.	_	
14-50	6965-6968	Now	_	
14-51	6969-6972	let	_	
14-52	6972-6973	’	_	
14-53	6973-6974	s	_	
14-54	6975-6979	take	_	
14-55	6980-6981	a	_	
14-56	6982-6988	deeper	_	
14-57	6989-6993	look	_	
14-58	6994-6996	at	_	
14-59	6997-7001	what	_	
14-60	7002-7009	happens	_	
14-61	7010-7014	when	_	
14-62	7015-7016	a	_	
14-63	7017-7024	backend	_	
14-64	7025-7032	service	_	
14-65	7033-7041	connects	_	
14-66	7042-7044	to	_	
14-67	7045-7046	a	_	
14-68	7047-7055	Postgres	_	
14-69	7056-7064	database	_	
14-70	7064-7065	,	_	
14-71	7066-7070	both	_	
14-72	7071-7075	with	_	
14-73	7076-7079	and	_	
14-74	7080-7087	without	_	
14-75	7088-7095	pooling	_	
14-76	7095-7096	.	_	
14-77	7097-7104	Scaling	_	
14-78	7105-7113	database	_	
14-79	7114-7125	performance	_	
14-80	7126-7133	without	_	
14-81	7134-7144	connection	_	
14-82	7145-7152	pooling	_	

#Text=We do not need a connection pooler to connect to a backend service. We can connect to a Postgres database directly. To examine how long it takes to execute concurrent connections to a database without a connection pooler, we will use pgbench to benchmark connections to the Postgres database. Pgbench is based on TPC-B. TPC-B measures throughput in terms of how many transactions per second a system can perform. Pgbench executes five SELECT, INSERT, and UPDATE commands per transaction.
15-1	7153-7155	We	_	
15-2	7156-7158	do	_	
15-3	7159-7162	not	_	
15-4	7163-7167	need	_	
15-5	7168-7169	a	_	
15-6	7170-7180	connection	_	
15-7	7181-7187	pooler	_	
15-8	7188-7190	to	_	
15-9	7191-7198	connect	_	
15-10	7199-7201	to	_	
15-11	7202-7203	a	_	
15-12	7204-7211	backend	_	
15-13	7212-7219	service	_	
15-14	7219-7220	.	_	
15-15	7221-7223	We	_	
15-16	7224-7227	can	_	
15-17	7228-7235	connect	_	
15-18	7236-7238	to	_	
15-19	7239-7240	a	_	
15-20	7241-7249	Postgres	_	
15-21	7250-7258	database	_	
15-22	7259-7267	directly	_	
15-23	7267-7268	.	_	
15-24	7269-7271	To	_	
15-25	7272-7279	examine	_	
15-26	7280-7283	how	_	
15-27	7284-7288	long	_	
15-28	7289-7291	it	_	
15-29	7292-7297	takes	_	
15-30	7298-7300	to	_	
15-31	7301-7308	execute	_	
15-32	7309-7319	concurrent	_	
15-33	7320-7331	connections	_	
15-34	7332-7334	to	_	
15-35	7335-7336	a	_	
15-36	7337-7345	database	_	
15-37	7346-7353	without	_	
15-38	7354-7355	a	_	
15-39	7356-7366	connection	_	
15-40	7367-7373	pooler	_	
15-41	7373-7374	,	_	
15-42	7375-7377	we	_	
15-43	7378-7382	will	_	
15-44	7383-7386	use	_	
15-45	7387-7394	pgbench	_	
15-46	7395-7397	to	_	
15-47	7398-7407	benchmark	_	
15-48	7408-7419	connections	_	
15-49	7420-7422	to	_	
15-50	7423-7426	the	_	
15-51	7427-7435	Postgres	_	
15-52	7436-7444	database	_	
15-53	7444-7445	.	_	
15-54	7446-7453	Pgbench	_	
15-55	7454-7456	is	_	
15-56	7457-7462	based	_	
15-57	7463-7465	on	_	
15-58	7466-7471	TPC-B	_	
15-59	7471-7472	.	_	
15-60	7473-7478	TPC-B	_	
15-61	7479-7487	measures	_	
15-62	7488-7498	throughput	_	
15-63	7499-7501	in	_	
15-64	7502-7507	terms	_	
15-65	7508-7510	of	_	
15-66	7511-7514	how	_	
15-67	7515-7519	many	_	
15-68	7520-7532	transactions	_	
15-69	7533-7536	per	_	
15-70	7537-7543	second	_	
15-71	7544-7545	a	_	
15-72	7546-7552	system	_	
15-73	7553-7556	can	_	
15-74	7557-7564	perform	_	
15-75	7564-7565	.	_	
15-76	7566-7573	Pgbench	_	
15-77	7574-7582	executes	_	
15-78	7583-7587	five	_	
15-79	7588-7594	SELECT	_	
15-80	7594-7595	,	_	
15-81	7596-7602	INSERT	_	
15-82	7602-7603	,	_	
15-83	7604-7607	and	_	
15-84	7608-7614	UPDATE	_	
15-85	7615-7623	commands	_	
15-86	7624-7627	per	_	
15-87	7628-7639	transaction	_	
15-88	7639-7640	.	_	

#Text=Based on TPC-B-like transactions, pgbench runs the same sequence of SQL commands repeatedly in multiple concurrent database sessions and calculates the average transaction rate. Before we run pgbench, we need to initialize it with the following command to create the pgbench_history, pgbench_branches, pgbench_tellers, and pgbench_accounts tables. Pgbench uses the following tables to run transactions for benchmarking.
16-1	7641-7646	Based	_	
16-2	7647-7649	on	_	
16-3	7650-7660	TPC-B-like	_	
16-4	7661-7673	transactions	_	
16-5	7673-7674	,	_	
16-6	7675-7682	pgbench	_	
16-7	7683-7687	runs	_	
16-8	7688-7691	the	_	
16-9	7692-7696	same	_	
16-10	7697-7705	sequence	_	
16-11	7706-7708	of	_	
16-12	7709-7712	SQL	_	
16-13	7713-7721	commands	_	
16-14	7722-7732	repeatedly	_	
16-15	7733-7735	in	_	
16-16	7736-7744	multiple	_	
16-17	7745-7755	concurrent	_	
16-18	7756-7764	database	_	
16-19	7765-7773	sessions	_	
16-20	7774-7777	and	_	
16-21	7778-7788	calculates	_	
16-22	7789-7792	the	_	
16-23	7793-7800	average	_	
16-24	7801-7812	transaction	_	
16-25	7813-7817	rate	_	
16-26	7817-7818	.	_	
16-27	7819-7825	Before	_	
16-28	7826-7828	we	_	
16-29	7829-7832	run	_	
16-30	7833-7840	pgbench	_	
16-31	7840-7841	,	_	
16-32	7842-7844	we	_	
16-33	7845-7849	need	_	
16-34	7850-7852	to	_	
16-35	7853-7863	initialize	_	
16-36	7864-7866	it	_	
16-37	7867-7871	with	_	
16-38	7872-7875	the	_	
16-39	7876-7885	following	_	
16-40	7886-7893	command	_	
16-41	7894-7896	to	_	
16-42	7897-7903	create	_	
16-43	7904-7907	the	_	
16-44	7908-7923	pgbench_history	_	
16-45	7923-7924	,	_	
16-46	7925-7941	pgbench_branches	_	
16-47	7941-7942	,	_	
16-48	7943-7958	pgbench_tellers	_	
16-49	7958-7959	,	_	
16-50	7960-7963	and	_	
16-51	7964-7980	pgbench_accounts	_	
16-52	7981-7987	tables	_	
16-53	7987-7988	.	_	
16-54	7989-7996	Pgbench	_	
16-55	7997-8001	uses	_	
16-56	8002-8005	the	_	
16-57	8006-8015	following	_	
16-58	8016-8022	tables	_	
16-59	8023-8025	to	_	
16-60	8026-8029	run	_	
16-61	8030-8042	transactions	_	
16-62	8043-8046	for	_	
16-63	8047-8059	benchmarking	_	
16-64	8059-8060	.	_	

#Text=pgbench  -i  -s 50  database_name Afterward, I executed the command below to test the database with 150 clients pgbench  -c 10  -j 2  -t  10000  database_name As you see, in our initial baseline test, I instructed pgbench to execute with ten different client sessions. Each client session will execute 10,000 transactions.
17-1	8061-8068	pgbench	_	
17-2	8068-8069	 	_	
17-3	8070-8071	-	_	
17-4	8071-8072	i	_	
17-5	8072-8073	 	_	
17-6	8074-8075	-	_	
17-7	8075-8076	s	_	
17-8	8077-8079	50	_	
17-9	8079-8080	 	_	
17-10	8081-8094	database_name	_	
17-11	8095-8104	Afterward	_	
17-12	8104-8105	,	_	
17-13	8106-8107	I	_	
17-14	8108-8116	executed	_	
17-15	8117-8120	the	_	
17-16	8121-8128	command	_	
17-17	8129-8134	below	_	
17-18	8135-8137	to	_	
17-19	8138-8142	test	_	
17-20	8143-8146	the	_	
17-21	8147-8155	database	_	
17-22	8156-8160	with	_	
17-23	8161-8164	150	_	
17-24	8165-8172	clients	_	
17-25	8173-8180	pgbench	_	
17-26	8180-8181	 	_	
17-27	8182-8183	-	_	
17-28	8183-8184	c	_	
17-29	8185-8187	10	_	
17-30	8187-8188	 	_	
17-31	8189-8190	-	_	
17-32	8190-8191	j	_	
17-33	8192-8193	2	_	
17-34	8193-8194	 	_	
17-35	8195-8196	-	_	
17-36	8196-8197	t	_	
17-37	8197-8198	 	_	
17-38	8199-8204	10000	_	
17-39	8204-8205	 	_	
17-40	8206-8219	database_name	_	
17-41	8220-8222	As	_	
17-42	8223-8226	you	_	
17-43	8227-8230	see	_	
17-44	8230-8231	,	_	
17-45	8232-8234	in	_	
17-46	8235-8238	our	_	
17-47	8239-8246	initial	_	
17-48	8247-8255	baseline	_	
17-49	8256-8260	test	_	
17-50	8260-8261	,	_	
17-51	8262-8263	I	_	
17-52	8264-8274	instructed	_	
17-53	8275-8282	pgbench	_	
17-54	8283-8285	to	_	
17-55	8286-8293	execute	_	
17-56	8294-8298	with	_	
17-57	8299-8302	ten	_	
17-58	8303-8312	different	_	
17-59	8313-8319	client	_	
17-60	8320-8328	sessions	_	
17-61	8328-8329	.	_	
17-62	8330-8334	Each	_	
17-63	8335-8341	client	_	
17-64	8342-8349	session	_	
17-65	8350-8354	will	_	
17-66	8355-8362	execute	_	
17-67	8363-8369	10,000	_	
17-68	8370-8382	transactions	_	
17-69	8382-8383	.	_	

#Text=From these results, it seems our initial baseline test is 486 transactions per second. Let’s see how we can make use of connection poolers like pgbouncer and pgpool to increase transaction throughput and avoid a ‘Sorry!, too many clients already’ error. Scaling database performance with pgbouncer
18-1	8384-8388	From	_	
18-2	8389-8394	these	_	
18-3	8395-8402	results	_	
18-4	8402-8403	,	_	
18-5	8404-8406	it	_	
18-6	8407-8412	seems	_	
18-7	8413-8416	our	_	
18-8	8417-8424	initial	_	
18-9	8425-8433	baseline	_	
18-10	8434-8438	test	_	
18-11	8439-8441	is	_	
18-12	8442-8445	486	_	
18-13	8446-8458	transactions	_	
18-14	8459-8462	per	_	
18-15	8463-8469	second	_	
18-16	8469-8470	.	_	
18-17	8471-8474	Let	_	
18-18	8474-8475	’	_	
18-19	8475-8476	s	_	
18-20	8477-8480	see	_	
18-21	8481-8484	how	_	
18-22	8485-8487	we	_	
18-23	8488-8491	can	_	
18-24	8492-8496	make	_	
18-25	8497-8500	use	_	
18-26	8501-8503	of	_	
18-27	8504-8514	connection	_	
18-28	8515-8522	poolers	_	
18-29	8523-8527	like	_	
18-30	8528-8537	pgbouncer	_	
18-31	8538-8541	and	_	
18-32	8542-8548	pgpool	_	
18-33	8549-8551	to	_	
18-34	8552-8560	increase	_	
18-35	8561-8572	transaction	_	
18-36	8573-8583	throughput	_	
18-37	8584-8587	and	_	
18-38	8588-8593	avoid	_	
18-39	8594-8595	a	_	
18-40	8596-8597	‘	_	
18-41	8597-8602	Sorry	_	
18-42	8602-8603	!	_	
18-43	8603-8604	,	_	
18-44	8605-8608	too	_	
18-45	8609-8613	many	_	
18-46	8614-8621	clients	_	
18-47	8622-8629	already	_	
18-48	8629-8630	’	_	
18-49	8631-8636	error	_	
18-50	8636-8637	.	_	
18-51	8638-8645	Scaling	_	
18-52	8646-8654	database	_	
18-53	8655-8666	performance	_	
18-54	8667-8671	with	_	
18-55	8672-8681	pgbouncer	_	

#Text=Let’s look at how we can use pgbouncer to increase transaction throughput. Pgbouncer can be installed on almost all Linux distributions. You can check here how to set up pgbouncer. Alternatively, you can install pgbouncer using package managers like apt-get or yum.
19-1	8682-8685	Let	_	
19-2	8685-8686	’	_	
19-3	8686-8687	s	_	
19-4	8688-8692	look	_	
19-5	8693-8695	at	_	
19-6	8696-8699	how	_	
19-7	8700-8702	we	_	
19-8	8703-8706	can	_	
19-9	8707-8710	use	_	
19-10	8711-8720	pgbouncer	_	
19-11	8721-8723	to	_	
19-12	8724-8732	increase	_	
19-13	8733-8744	transaction	_	
19-14	8745-8755	throughput	_	
19-15	8755-8756	.	_	
19-16	8757-8766	Pgbouncer	_	
19-17	8767-8770	can	_	
19-18	8771-8773	be	_	
19-19	8774-8783	installed	_	
19-20	8784-8786	on	_	
19-21	8787-8793	almost	_	
19-22	8794-8797	all	_	
19-23	8798-8803	Linux	_	
19-24	8804-8817	distributions	_	
19-25	8817-8818	.	_	
19-26	8819-8822	You	_	
19-27	8823-8826	can	_	
19-28	8827-8832	check	_	
19-29	8833-8837	here	_	
19-30	8838-8841	how	_	
19-31	8842-8844	to	_	
19-32	8845-8848	set	_	
19-33	8849-8851	up	_	
19-34	8852-8861	pgbouncer	_	
19-35	8861-8862	.	_	
19-36	8863-8876	Alternatively	_	
19-37	8876-8877	,	_	
19-38	8878-8881	you	_	
19-39	8882-8885	can	_	
19-40	8886-8893	install	_	
19-41	8894-8903	pgbouncer	_	
19-42	8904-8909	using	_	
19-43	8910-8917	package	_	
19-44	8918-8926	managers	_	
19-45	8927-8931	like	_	
19-46	8932-8939	apt-get	_	
19-47	8940-8942	or	_	
19-48	8943-8946	yum	_	
19-49	8946-8947	.	_	

#Text=If you find it difficult to authenticate clients with pgbouncer, you can check GitHub on how to do so. Pgbouncer comes with three types of pooling: Session pooling: One of the connections in the pool is assigned to a client until the timeout is reached.  Transaction pooling: Similar to session polling, it gets a connection from the pool. It keeps it until the transaction is done. If the same client wants to run another transaction, it has to wait until it gets another transaction assigned to it. Statement pooling: Connection is returned to the pool as soon as the first query is completed.
20-1	8948-8950	If	_	
20-2	8951-8954	you	_	
20-3	8955-8959	find	_	
20-4	8960-8962	it	_	
20-5	8963-8972	difficult	_	
20-6	8973-8975	to	_	
20-7	8976-8988	authenticate	_	
20-8	8989-8996	clients	_	
20-9	8997-9001	with	_	
20-10	9002-9011	pgbouncer	_	
20-11	9011-9012	,	_	
20-12	9013-9016	you	_	
20-13	9017-9020	can	_	
20-14	9021-9026	check	_	
20-15	9027-9033	GitHub	_	
20-16	9034-9036	on	_	
20-17	9037-9040	how	_	
20-18	9041-9043	to	_	
20-19	9044-9046	do	_	
20-20	9047-9049	so	_	
20-21	9049-9050	.	_	
20-22	9051-9060	Pgbouncer	_	
20-23	9061-9066	comes	_	
20-24	9067-9071	with	_	
20-25	9072-9077	three	_	
20-26	9078-9083	types	_	
20-27	9084-9086	of	_	
20-28	9087-9094	pooling	_	
20-29	9094-9095	:	_	
20-30	9096-9103	Session	_	
20-31	9104-9111	pooling	_	
20-32	9111-9112	:	_	
20-33	9113-9116	One	_	
20-34	9117-9119	of	_	
20-35	9120-9123	the	_	
20-36	9124-9135	connections	_	
20-37	9136-9138	in	_	
20-38	9139-9142	the	_	
20-39	9143-9147	pool	_	
20-40	9148-9150	is	_	
20-41	9151-9159	assigned	_	
20-42	9160-9162	to	_	
20-43	9163-9164	a	_	
20-44	9165-9171	client	_	
20-45	9172-9177	until	_	
20-46	9178-9181	the	_	
20-47	9182-9189	timeout	_	
20-48	9190-9192	is	_	
20-49	9193-9200	reached	_	
20-50	9200-9201	.	_	
20-51	9201-9203	  	_	
20-52	9203-9214	Transaction	_	
20-53	9215-9222	pooling	_	
20-54	9222-9223	:	_	
20-55	9224-9231	Similar	_	
20-56	9232-9234	to	_	
20-57	9235-9242	session	_	
20-58	9243-9250	polling	_	
20-59	9250-9251	,	_	
20-60	9252-9254	it	_	
20-61	9255-9259	gets	_	
20-62	9260-9261	a	_	
20-63	9262-9272	connection	_	
20-64	9273-9277	from	_	
20-65	9278-9281	the	_	
20-66	9282-9286	pool	_	
20-67	9286-9287	.	_	
20-68	9288-9290	It	_	
20-69	9291-9296	keeps	_	
20-70	9297-9299	it	_	
20-71	9300-9305	until	_	
20-72	9306-9309	the	_	
20-73	9310-9321	transaction	_	
20-74	9322-9324	is	_	
20-75	9325-9329	done	_	
20-76	9329-9330	.	_	
20-77	9331-9333	If	_	
20-78	9334-9337	the	_	
20-79	9338-9342	same	_	
20-80	9343-9349	client	_	
20-81	9350-9355	wants	_	
20-82	9356-9358	to	_	
20-83	9359-9362	run	_	
20-84	9363-9370	another	_	
20-85	9371-9382	transaction	_	
20-86	9382-9383	,	_	
20-87	9384-9386	it	_	
20-88	9387-9390	has	_	
20-89	9391-9393	to	_	
20-90	9394-9398	wait	_	
20-91	9399-9404	until	_	
20-92	9405-9407	it	_	
20-93	9408-9412	gets	_	
20-94	9413-9420	another	_	
20-95	9421-9432	transaction	_	
20-96	9433-9441	assigned	_	
20-97	9442-9444	to	_	
20-98	9445-9447	it	_	
20-99	9447-9448	.	_	
20-100	9448-9449	 	_	
20-101	9449-9458	Statement	_	
20-102	9459-9466	pooling	_	
20-103	9466-9467	:	_	
20-104	9468-9478	Connection	_	
20-105	9479-9481	is	_	
20-106	9482-9490	returned	_	
20-107	9491-9493	to	_	
20-108	9494-9497	the	_	
20-109	9498-9502	pool	_	
20-110	9503-9505	as	_	
20-111	9506-9510	soon	_	
20-112	9511-9513	as	_	
20-113	9514-9517	the	_	
20-114	9518-9523	first	_	
20-115	9524-9529	query	_	
20-116	9530-9532	is	_	
20-117	9533-9542	completed	_	
20-118	9542-9543	.	_	

#Text=We will make use of the transaction pooling mode. Inside the pgbouncer.ini file, I modified the following parameter: max_client_conn = 100 The max_client_conn parameter defines how many client connections to pgbouncer (instead of Postgres) are allowed. default_pool_size = 25 The default_pool_size parameter defines how many server connections to allow per user/database pair.
21-1	9544-9546	We	_	
21-2	9547-9551	will	_	
21-3	9552-9556	make	_	
21-4	9557-9560	use	_	
21-5	9561-9563	of	_	
21-6	9564-9567	the	_	
21-7	9568-9579	transaction	_	
21-8	9580-9587	pooling	_	
21-9	9588-9592	mode	_	
21-10	9592-9593	.	_	
21-11	9594-9600	Inside	_	
21-12	9601-9604	the	_	
21-13	9605-9618	pgbouncer.ini	_	
21-14	9619-9623	file	_	
21-15	9623-9624	,	_	
21-16	9625-9626	I	_	
21-17	9627-9635	modified	_	
21-18	9636-9639	the	_	
21-19	9640-9649	following	_	
21-20	9650-9659	parameter	_	
21-21	9659-9660	:	_	
21-22	9661-9676	max_client_conn	PARAM	
21-23	9677-9678	=	_	
21-24	9679-9682	100	VALUE	
21-25	9683-9686	The	_	
21-26	9687-9702	max_client_conn	_	
21-27	9703-9712	parameter	_	
21-28	9713-9720	defines	_	
21-29	9721-9724	how	_	
21-30	9725-9729	many	_	
21-31	9730-9736	client	_	
21-32	9737-9748	connections	_	
21-33	9749-9751	to	_	
21-34	9752-9761	pgbouncer	_	
21-35	9762-9763	(	_	
21-36	9763-9770	instead	_	
21-37	9771-9773	of	_	
21-38	9774-9782	Postgres	_	
21-39	9782-9783	)	_	
21-40	9784-9787	are	_	
21-41	9788-9795	allowed	_	
21-42	9795-9796	.	_	
21-43	9797-9814	default_pool_size	PARAM	
21-44	9815-9816	=	_	
21-45	9817-9819	25	VALUE	
21-46	9820-9823	The	_	
21-47	9824-9841	default_pool_size	_	
21-48	9842-9851	parameter	_	
21-49	9852-9859	defines	_	
21-50	9860-9863	how	_	
21-51	9864-9868	many	_	
21-52	9869-9875	server	_	
21-53	9876-9887	connections	_	
21-54	9888-9890	to	_	
21-55	9891-9896	allow	_	
21-56	9897-9900	per	_	
21-57	9901-9905	user	_	
21-58	9905-9906	/	_	
21-59	9906-9914	database	_	
21-60	9915-9919	pair	_	
21-61	9919-9920	.	_	

#Text=reserve_pool_size = 5 The reserve_pool_size parameter defines how many additional connections are allowed to the pool. As in the previous test I executed pgbench with ten different client sessions. Each client executes 1000 transactions as shown below. pgbench  -c 10  -p -j 2  -t 1000 database_name
22-1	9921-9938	reserve_pool_size	PARAM	
22-2	9939-9940	=	_	
22-3	9941-9942	5	VALUE	
22-4	9943-9946	The	_	
22-5	9947-9964	reserve_pool_size	_	
22-6	9965-9974	parameter	_	
22-7	9975-9982	defines	_	
22-8	9983-9986	how	_	
22-9	9987-9991	many	_	
22-10	9992-10002	additional	_	
22-11	10003-10014	connections	_	
22-12	10015-10018	are	_	
22-13	10019-10026	allowed	_	
22-14	10027-10029	to	_	
22-15	10030-10033	the	_	
22-16	10034-10038	pool	_	
22-17	10038-10039	.	_	
22-18	10040-10042	As	_	
22-19	10043-10045	in	_	
22-20	10046-10049	the	_	
22-21	10050-10058	previous	_	
22-22	10059-10063	test	_	
22-23	10064-10065	I	_	
22-24	10066-10074	executed	_	
22-25	10075-10082	pgbench	_	
22-26	10083-10087	with	_	
22-27	10088-10091	ten	_	
22-28	10092-10101	different	_	
22-29	10102-10108	client	_	
22-30	10109-10117	sessions	_	
22-31	10117-10118	.	_	
22-32	10119-10123	Each	_	
22-33	10124-10130	client	_	
22-34	10131-10139	executes	_	
22-35	10140-10144	1000	_	
22-36	10145-10157	transactions	_	
22-37	10158-10160	as	_	
22-38	10161-10166	shown	_	
22-39	10167-10172	below	_	
22-40	10172-10173	.	_	
22-41	10174-10181	pgbench	_	
22-42	10181-10182	 	_	
22-43	10183-10184	-	_	
22-44	10184-10185	c	_	
22-45	10186-10188	10	_	
22-46	10188-10189	 	_	
22-47	10190-10191	-	_	
22-48	10191-10192	p	_	
22-49	10193-10194	-	_	
22-50	10194-10195	j	_	
22-51	10196-10197	2	_	
22-52	10197-10198	 	_	
22-53	10199-10200	-	_	
22-54	10200-10201	t	_	
22-55	10202-10206	1000	_	
22-56	10207-10220	database_name	_	

#Text=As you see, transaction throughput increased from 486 transactions per second to 566 transactions per second. With the help of pgbouncer, transaction throughput improved by approximately 60%. Now let’s see how we can increase transaction throughput with pgpool-II since it comes with connection pooling features. Unlike pgbouncer, pgpool-II offers features beyond connection pooling. The documentation provides detailed information about pgpool-II features and how to set it up from source or via a package manager
23-1	10221-10223	As	_	
23-2	10224-10227	you	_	
23-3	10228-10231	see	_	
23-4	10231-10232	,	_	
23-5	10233-10244	transaction	_	
23-6	10245-10255	throughput	_	
23-7	10256-10265	increased	_	
23-8	10266-10270	from	_	
23-9	10271-10274	486	_	
23-10	10275-10287	transactions	_	
23-11	10288-10291	per	_	
23-12	10292-10298	second	_	
23-13	10299-10301	to	_	
23-14	10302-10305	566	_	
23-15	10306-10318	transactions	_	
23-16	10319-10322	per	_	
23-17	10323-10329	second	_	
23-18	10329-10330	.	_	
23-19	10331-10335	With	_	
23-20	10336-10339	the	_	
23-21	10340-10344	help	_	
23-22	10345-10347	of	_	
23-23	10348-10357	pgbouncer	_	
23-24	10357-10358	,	_	
23-25	10359-10370	transaction	_	
23-26	10371-10381	throughput	_	
23-27	10382-10390	improved	_	
23-28	10391-10393	by	_	
23-29	10394-10407	approximately	_	
23-30	10408-10411	60%	_	
23-31	10411-10412	.	_	
23-32	10413-10416	Now	_	
23-33	10417-10420	let	_	
23-34	10420-10421	’	_	
23-35	10421-10422	s	_	
23-36	10423-10426	see	_	
23-37	10427-10430	how	_	
23-38	10431-10433	we	_	
23-39	10434-10437	can	_	
23-40	10438-10446	increase	_	
23-41	10447-10458	transaction	_	
23-42	10459-10469	throughput	_	
23-43	10470-10474	with	_	
23-44	10475-10484	pgpool-II	_	
23-45	10485-10490	since	_	
23-46	10491-10493	it	_	
23-47	10494-10499	comes	_	
23-48	10500-10504	with	_	
23-49	10505-10515	connection	_	
23-50	10516-10523	pooling	_	
23-51	10524-10532	features	_	
23-52	10532-10533	.	_	
23-53	10534-10540	Unlike	_	
23-54	10541-10550	pgbouncer	_	
23-55	10550-10551	,	_	
23-56	10552-10561	pgpool-II	_	
23-57	10562-10568	offers	_	
23-58	10569-10577	features	_	
23-59	10578-10584	beyond	_	
23-60	10585-10595	connection	_	
23-61	10596-10603	pooling	_	
23-62	10603-10604	.	_	
23-63	10605-10608	The	_	
23-64	10609-10622	documentation	_	
23-65	10623-10631	provides	_	
23-66	10632-10640	detailed	_	
23-67	10641-10652	information	_	
23-68	10653-10658	about	_	
23-69	10659-10668	pgpool-II	_	
23-70	10669-10677	features	_	
23-71	10678-10681	and	_	
23-72	10682-10685	how	_	
23-73	10686-10688	to	_	
23-74	10689-10692	set	_	
23-75	10693-10695	it	_	
23-76	10696-10698	up	_	
23-77	10699-10703	from	_	
23-78	10704-10710	source	_	
23-79	10711-10713	or	_	
23-80	10714-10717	via	_	
23-81	10718-10719	a	_	
23-82	10720-10727	package	_	
23-83	10728-10735	manager	_	

#Text=I changed the following parameters in the pgpool.conf file to make it route clients connections from pgpool2 to Postgres database server. connection_cache  = on listen_addresses  = ‘postgres_database_name’’ port  = 5432 Setting the connection_cache parameter to on activates pgpool2 pooling capability.
24-1	10736-10737	I	_	
24-2	10738-10745	changed	_	
24-3	10746-10749	the	_	
24-4	10750-10759	following	_	
24-5	10760-10770	parameters	_	
24-6	10771-10773	in	_	
24-7	10774-10777	the	_	
24-8	10778-10789	pgpool.conf	_	
24-9	10790-10794	file	_	
24-10	10795-10797	to	_	
24-11	10798-10802	make	_	
24-12	10803-10805	it	_	
24-13	10806-10811	route	_	
24-14	10812-10819	clients	_	
24-15	10820-10831	connections	_	
24-16	10832-10836	from	_	
24-17	10837-10844	pgpool2	_	
24-18	10845-10847	to	_	
24-19	10848-10856	Postgres	_	
24-20	10857-10865	database	_	
24-21	10866-10872	server	_	
24-22	10872-10873	.	_	
24-23	10874-10890	connection_cache	_	
24-24	10890-10891	 	_	
24-25	10892-10893	=	_	
24-26	10894-10896	on	_	
24-27	10897-10913	listen_addresses	_	
24-28	10913-10914	 	_	
24-29	10915-10916	=	_	
24-30	10917-10918	‘	_	
24-31	10918-10940	postgres_database_name	_	
24-32	10940-10941	’	_	
24-33	10941-10942	’	_	
24-34	10943-10947	port	_	
24-35	10947-10948	 	_	
24-36	10949-10950	=	_	
24-37	10951-10955	5432	_	
24-38	10956-10963	Setting	_	
24-39	10964-10967	the	_	
24-40	10968-10984	connection_cache	_	
24-41	10985-10994	parameter	_	
24-42	10995-10997	to	_	
24-43	10998-11000	on	_	
24-44	11001-11010	activates	_	
24-45	11011-11018	pgpool2	_	
24-46	11019-11026	pooling	_	
24-47	11027-11037	capability	_	
24-48	11037-11038	.	_	

#Text=Like the previous test, pgbench executed ten different client sessions. Each client executes 1000 transactions to the Postgres database server. Thus we expect a total of 10,000 transactions from all clients. gbench  -p 9999  -c  10  -C  -t 1000  postgres_database In the same way we increased transaction throughput with pgbouncer, it seems pgpool2 also increased transaction throughput by 75% as compared to the initial test.
25-1	11039-11043	Like	_	
25-2	11044-11047	the	_	
25-3	11048-11056	previous	_	
25-4	11057-11061	test	_	
25-5	11061-11062	,	_	
25-6	11063-11070	pgbench	_	
25-7	11071-11079	executed	_	
25-8	11080-11083	ten	_	
25-9	11084-11093	different	_	
25-10	11094-11100	client	_	
25-11	11101-11109	sessions	_	
25-12	11109-11110	.	_	
25-13	11111-11115	Each	_	
25-14	11116-11122	client	_	
25-15	11123-11131	executes	_	
25-16	11132-11136	1000	_	
25-17	11137-11149	transactions	_	
25-18	11150-11152	to	_	
25-19	11153-11156	the	_	
25-20	11157-11165	Postgres	_	
25-21	11166-11174	database	_	
25-22	11175-11181	server	_	
25-23	11181-11182	.	_	
25-24	11183-11187	Thus	_	
25-25	11188-11190	we	_	
25-26	11191-11197	expect	_	
25-27	11198-11199	a	_	
25-28	11200-11205	total	_	
25-29	11206-11208	of	_	
25-30	11209-11215	10,000	_	
25-31	11216-11228	transactions	_	
25-32	11229-11233	from	_	
25-33	11234-11237	all	_	
25-34	11238-11245	clients	_	
25-35	11245-11246	.	_	
25-36	11247-11253	gbench	_	
25-37	11253-11254	 	_	
25-38	11255-11256	-	_	
25-39	11256-11257	p	_	
25-40	11258-11262	9999	_	
25-41	11262-11263	 	_	
25-42	11264-11265	-	_	
25-43	11265-11266	c	_	
25-44	11266-11267	 	_	
25-45	11268-11270	10	_	
25-46	11270-11271	 	_	
25-47	11272-11273	-	_	
25-48	11273-11274	C	_	
25-49	11274-11275	 	_	
25-50	11276-11277	-	_	
25-51	11277-11278	t	_	
25-52	11279-11283	1000	_	
25-53	11283-11284	 	_	
25-54	11285-11302	postgres_database	_	
25-55	11303-11305	In	_	
25-56	11306-11309	the	_	
25-57	11310-11314	same	_	
25-58	11315-11318	way	_	
25-59	11319-11321	we	_	
25-60	11322-11331	increased	_	
25-61	11332-11343	transaction	_	
25-62	11344-11354	throughput	_	
25-63	11355-11359	with	_	
25-64	11360-11369	pgbouncer	_	
25-65	11369-11370	,	_	
25-66	11371-11373	it	_	
25-67	11374-11379	seems	_	
25-68	11380-11387	pgpool2	_	
25-69	11388-11392	also	_	
25-70	11393-11402	increased	_	
25-71	11403-11414	transaction	_	
25-72	11415-11425	throughput	_	
25-73	11426-11428	by	_	
25-74	11429-11432	75%	_	
25-75	11433-11435	as	_	
25-76	11436-11444	compared	_	
25-77	11445-11447	to	_	
25-78	11448-11451	the	_	
25-79	11452-11459	initial	_	
25-80	11460-11464	test	_	
25-81	11464-11465	.	_	

#Text=Pgbouncer implements connection pooling ‘out of the box’ without the need to fine-tune parameters while pgpool2 allows you to fine-tune parameters to enhance connection pooling. Choosing a connection pooler: pgpool-II or pgbouncer? There are several factors to consider when choosing a connection pooler to use. Although pgbouncer and pgpool-II are great solutions for connection pooling, each tool has its strengths and weaknesses.
26-1	11466-11475	Pgbouncer	_	
26-2	11476-11486	implements	_	
26-3	11487-11497	connection	_	
26-4	11498-11505	pooling	_	
26-5	11506-11507	‘	_	
26-6	11507-11510	out	_	
26-7	11511-11513	of	_	
26-8	11514-11517	the	_	
26-9	11518-11521	box	_	
26-10	11521-11522	’	_	
26-11	11523-11530	without	_	
26-12	11531-11534	the	_	
26-13	11535-11539	need	_	
26-14	11540-11542	to	_	
26-15	11543-11552	fine-tune	_	
26-16	11553-11563	parameters	_	
26-17	11564-11569	while	_	
26-18	11570-11577	pgpool2	_	
26-19	11578-11584	allows	_	
26-20	11585-11588	you	_	
26-21	11589-11591	to	_	
26-22	11592-11601	fine-tune	_	
26-23	11602-11612	parameters	_	
26-24	11613-11615	to	_	
26-25	11616-11623	enhance	_	
26-26	11624-11634	connection	_	
26-27	11635-11642	pooling	_	
26-28	11642-11643	.	_	
26-29	11644-11652	Choosing	_	
26-30	11653-11654	a	_	
26-31	11655-11665	connection	_	
26-32	11666-11672	pooler	_	
26-33	11672-11673	:	_	
26-34	11674-11683	pgpool-II	_	
26-35	11684-11686	or	_	
26-36	11687-11696	pgbouncer	_	
26-37	11696-11697	?	_	
26-38	11698-11703	There	_	
26-39	11704-11707	are	_	
26-40	11708-11715	several	_	
26-41	11716-11723	factors	_	
26-42	11724-11726	to	_	
26-43	11727-11735	consider	_	
26-44	11736-11740	when	_	
26-45	11741-11749	choosing	_	
26-46	11750-11751	a	_	
26-47	11752-11762	connection	_	
26-48	11763-11769	pooler	_	
26-49	11770-11772	to	_	
26-50	11773-11776	use	_	
26-51	11776-11777	.	_	
26-52	11778-11786	Although	_	
26-53	11787-11796	pgbouncer	_	
26-54	11797-11800	and	_	
26-55	11801-11810	pgpool-II	_	
26-56	11811-11814	are	_	
26-57	11815-11820	great	_	
26-58	11821-11830	solutions	_	
26-59	11831-11834	for	_	
26-60	11835-11845	connection	_	
26-61	11846-11853	pooling	_	
26-62	11853-11854	,	_	
26-63	11855-11859	each	_	
26-64	11860-11864	tool	_	
26-65	11865-11868	has	_	
26-66	11869-11872	its	_	
26-67	11873-11882	strengths	_	
26-68	11883-11886	and	_	
26-69	11887-11897	weaknesses	_	
26-70	11897-11898	.	_	

#Text=Memory/resource consumption If you are interested in a lightweight connection pooler for your backend service, then pgbouncer is the right tool for you. Unlike pgpool-II, which by default allows 32 child processes to be forked, pgbouncer uses only one process. Thus pgbouncer consumes less memory than pgpool2.
27-1	11899-11905	Memory	_	
27-2	11905-11906	/	_	
27-3	11906-11914	resource	_	
27-4	11915-11926	consumption	_	
27-5	11927-11929	If	_	
27-6	11930-11933	you	_	
27-7	11934-11937	are	_	
27-8	11938-11948	interested	_	
27-9	11949-11951	in	_	
27-10	11952-11953	a	_	
27-11	11954-11965	lightweight	_	
27-12	11966-11976	connection	_	
27-13	11977-11983	pooler	_	
27-14	11984-11987	for	_	
27-15	11988-11992	your	_	
27-16	11993-12000	backend	_	
27-17	12001-12008	service	_	
27-18	12008-12009	,	_	
27-19	12010-12014	then	_	
27-20	12015-12024	pgbouncer	_	
27-21	12025-12027	is	_	
27-22	12028-12031	the	_	
27-23	12032-12037	right	_	
27-24	12038-12042	tool	_	
27-25	12043-12046	for	_	
27-26	12047-12050	you	_	
27-27	12050-12051	.	_	
27-28	12052-12058	Unlike	_	
27-29	12059-12068	pgpool-II	_	
27-30	12068-12069	,	_	
27-31	12070-12075	which	_	
27-32	12076-12078	by	_	
27-33	12079-12086	default	_	
27-34	12087-12093	allows	_	
27-35	12094-12096	32	_	
27-36	12097-12102	child	_	
27-37	12103-12112	processes	_	
27-38	12113-12115	to	_	
27-39	12116-12118	be	_	
27-40	12119-12125	forked	_	
27-41	12125-12126	,	_	
27-42	12127-12136	pgbouncer	_	
27-43	12137-12141	uses	_	
27-44	12142-12146	only	_	
27-45	12147-12150	one	_	
27-46	12151-12158	process	_	
27-47	12158-12159	.	_	
27-48	12160-12164	Thus	_	
27-49	12165-12174	pgbouncer	_	
27-50	12175-12183	consumes	_	
27-51	12184-12188	less	_	
27-52	12189-12195	memory	_	
27-53	12196-12200	than	_	
27-54	12201-12208	pgpool2	_	
27-55	12208-12209	.	_	

#Text=Streaming Replication Apart from pooling connections, you can also manage your Postgres cluster with streaming replication using pgpool-II.  Streaming replication copies data from a primary node to a secondary node. Pgpool-II supports Postgres streaming replication, while pgbouncer does not. It is the best way to achieve high availability and prevent data loss.
28-1	12210-12219	Streaming	_	
28-2	12220-12231	Replication	_	
28-3	12232-12237	Apart	_	
28-4	12238-12242	from	_	
28-5	12243-12250	pooling	_	
28-6	12251-12262	connections	_	
28-7	12262-12263	,	_	
28-8	12264-12267	you	_	
28-9	12268-12271	can	_	
28-10	12272-12276	also	_	
28-11	12277-12283	manage	_	
28-12	12284-12288	your	_	
28-13	12289-12297	Postgres	_	
28-14	12298-12305	cluster	_	
28-15	12306-12310	with	_	
28-16	12311-12320	streaming	_	
28-17	12321-12332	replication	_	
28-18	12333-12338	using	_	
28-19	12339-12348	pgpool-II	_	
28-20	12348-12349	.	_	
28-21	12349-12350	 	_	
28-22	12351-12360	Streaming	_	
28-23	12361-12372	replication	_	
28-24	12373-12379	copies	_	
28-25	12380-12384	data	_	
28-26	12385-12389	from	_	
28-27	12390-12391	a	_	
28-28	12392-12399	primary	_	
28-29	12400-12404	node	_	
28-30	12405-12407	to	_	
28-31	12408-12409	a	_	
28-32	12410-12419	secondary	_	
28-33	12420-12424	node	_	
28-34	12424-12425	.	_	
28-35	12426-12435	Pgpool-II	_	
28-36	12436-12444	supports	_	
28-37	12445-12453	Postgres	_	
28-38	12454-12463	streaming	_	
28-39	12464-12475	replication	_	
28-40	12475-12476	,	_	
28-41	12477-12482	while	_	
28-42	12483-12492	pgbouncer	_	
28-43	12493-12497	does	_	
28-44	12498-12501	not	_	
28-45	12501-12502	.	_	
28-46	12503-12505	It	_	
28-47	12506-12508	is	_	
28-48	12509-12512	the	_	
28-49	12513-12517	best	_	
28-50	12518-12521	way	_	
28-51	12522-12524	to	_	
28-52	12525-12532	achieve	_	
28-53	12533-12537	high	_	
28-54	12538-12550	availability	_	
28-55	12551-12554	and	_	
28-56	12555-12562	prevent	_	
28-57	12563-12567	data	_	
28-58	12568-12572	loss	_	
28-59	12572-12573	.	_	

#Text=Centralized password management In a production environment where you expect many clients/applications to connect to the database through a connection pooler concurrently, it is necessary to use a centralized password management system to manage clients’ credentials.
29-1	12574-12585	Centralized	_	
29-2	12586-12594	password	_	
29-3	12595-12605	management	_	
29-4	12606-12608	In	_	
29-5	12609-12610	a	_	
29-6	12611-12621	production	_	
29-7	12622-12633	environment	_	
29-8	12634-12639	where	_	
29-9	12640-12643	you	_	
29-10	12644-12650	expect	_	
29-11	12651-12655	many	_	
29-12	12656-12663	clients	_	
29-13	12663-12664	/	_	
29-14	12664-12676	applications	_	
29-15	12677-12679	to	_	
29-16	12680-12687	connect	_	
29-17	12688-12690	to	_	
29-18	12691-12694	the	_	
29-19	12695-12703	database	_	
29-20	12704-12711	through	_	
29-21	12712-12713	a	_	
29-22	12714-12724	connection	_	
29-23	12725-12731	pooler	_	
29-24	12732-12744	concurrently	_	
29-25	12744-12745	,	_	
29-26	12746-12748	it	_	
29-27	12749-12751	is	_	
29-28	12752-12761	necessary	_	
29-29	12762-12764	to	_	
29-30	12765-12768	use	_	
29-31	12769-12770	a	_	
29-32	12771-12782	centralized	_	
29-33	12783-12791	password	_	
29-34	12792-12802	management	_	
29-35	12803-12809	system	_	
29-36	12810-12812	to	_	
29-37	12813-12819	manage	_	
29-38	12820-12827	clients	_	
29-39	12827-12828	’	_	
29-40	12829-12840	credentials	_	
29-41	12840-12841	.	_	

#Text=You can make use of auth_query in pgbouncer to load clients’ credentials from the database instead of storing clients’ credentials in a userlist.txt file and comparing credentials from the connection string against the userlist.txt file. Load balancing and high availability Finally, if you want to add load balancing and high availability to your pooled connections, then pgpool2 is the right tool to use. pgpool2 supports Postgres high availability through the in-built watchdog processes. This pgpool2 sub-process monitors the health of pgpool2 nodes participating in the watchdog cluster as well as coordinating between multiple pgpool2 nodes.
30-1	12842-12845	You	_	
30-2	12846-12849	can	_	
30-3	12850-12854	make	_	
30-4	12855-12858	use	_	
30-5	12859-12861	of	_	
30-6	12862-12872	auth_query	_	
30-7	12873-12875	in	_	
30-8	12876-12885	pgbouncer	_	
30-9	12886-12888	to	_	
30-10	12889-12893	load	_	
30-11	12894-12901	clients	_	
30-12	12901-12902	’	_	
30-13	12903-12914	credentials	_	
30-14	12915-12919	from	_	
30-15	12920-12923	the	_	
30-16	12924-12932	database	_	
30-17	12933-12940	instead	_	
30-18	12941-12943	of	_	
30-19	12944-12951	storing	_	
30-20	12952-12959	clients	_	
30-21	12959-12960	’	_	
30-22	12961-12972	credentials	_	
30-23	12973-12975	in	_	
30-24	12976-12977	a	_	
30-25	12978-12990	userlist.txt	_	
30-26	12991-12995	file	_	
30-27	12996-12999	and	_	
30-28	13000-13009	comparing	_	
30-29	13010-13021	credentials	_	
30-30	13022-13026	from	_	
30-31	13027-13030	the	_	
30-32	13031-13041	connection	_	
30-33	13042-13048	string	_	
30-34	13049-13056	against	_	
30-35	13057-13060	the	_	
30-36	13061-13073	userlist.txt	_	
30-37	13074-13078	file	_	
30-38	13078-13079	.	_	
30-39	13080-13084	Load	_	
30-40	13085-13094	balancing	_	
30-41	13095-13098	and	_	
30-42	13099-13103	high	_	
30-43	13104-13116	availability	_	
30-44	13117-13124	Finally	_	
30-45	13124-13125	,	_	
30-46	13126-13128	if	_	
30-47	13129-13132	you	_	
30-48	13133-13137	want	_	
30-49	13138-13140	to	_	
30-50	13141-13144	add	_	
30-51	13145-13149	load	_	
30-52	13150-13159	balancing	_	
30-53	13160-13163	and	_	
30-54	13164-13168	high	_	
30-55	13169-13181	availability	_	
30-56	13182-13184	to	_	
30-57	13185-13189	your	_	
30-58	13190-13196	pooled	_	
30-59	13197-13208	connections	_	
30-60	13208-13209	,	_	
30-61	13210-13214	then	_	
30-62	13215-13222	pgpool2	_	
30-63	13223-13225	is	_	
30-64	13226-13229	the	_	
30-65	13230-13235	right	_	
30-66	13236-13240	tool	_	
30-67	13241-13243	to	_	
30-68	13244-13247	use	_	
30-69	13247-13248	.	_	
30-70	13249-13256	pgpool2	_	
30-71	13257-13265	supports	_	
30-72	13266-13274	Postgres	_	
30-73	13275-13279	high	_	
30-74	13280-13292	availability	_	
30-75	13293-13300	through	_	
30-76	13301-13304	the	_	
30-77	13305-13313	in-built	_	
30-78	13314-13322	watchdog	_	
30-79	13323-13332	processes	_	
30-80	13332-13333	.	_	
30-81	13334-13338	This	_	
30-82	13339-13346	pgpool2	_	
30-83	13347-13358	sub-process	_	
30-84	13359-13367	monitors	_	
30-85	13368-13371	the	_	
30-86	13372-13378	health	_	
30-87	13379-13381	of	_	
30-88	13382-13389	pgpool2	_	
30-89	13390-13395	nodes	_	
30-90	13396-13409	participating	_	
30-91	13410-13412	in	_	
30-92	13413-13416	the	_	
30-93	13417-13425	watchdog	_	
30-94	13426-13433	cluster	_	
30-95	13434-13436	as	_	
30-96	13437-13441	well	_	
30-97	13442-13444	as	_	
30-98	13445-13457	coordinating	_	
30-99	13458-13465	between	_	
30-100	13466-13474	multiple	_	
30-101	13475-13482	pgpool2	_	
30-102	13483-13488	nodes	_	
30-103	13488-13489	.	_	

#Text=Conclusion Database performance can be improved beyond connection pooling. Replication, load balancing, and in-memory caching can contribute to efficient database performance.
31-1	13490-13500	Conclusion	_	
31-2	13501-13509	Database	_	
31-3	13510-13521	performance	_	
31-4	13522-13525	can	_	
31-5	13526-13528	be	_	
31-6	13529-13537	improved	_	
31-7	13538-13544	beyond	_	
31-8	13545-13555	connection	_	
31-9	13556-13563	pooling	_	
31-10	13563-13564	.	_	
31-11	13565-13576	Replication	_	
31-12	13576-13577	,	_	
31-13	13578-13582	load	_	
31-14	13583-13592	balancing	_	
31-15	13592-13593	,	_	
31-16	13594-13597	and	_	
31-17	13598-13607	in-memory	_	
31-18	13608-13615	caching	_	
31-19	13616-13619	can	_	
31-20	13620-13630	contribute	_	
31-21	13631-13633	to	_	
31-22	13634-13643	efficient	_	
31-23	13644-13652	database	_	
31-24	13653-13664	performance	_	
31-25	13664-13665	.	_	

#Text=If a web service is designed to make a lot of read and write queries to a database, then you have multiple instances of a Postgres database in place to take care of write queries from clients through a load balancer such as pgpool-II while in-memory caching can be used to optimize read queries. Despite the pgpool-II ability to function as a loader balancer and connection pooler, pgbouncer is the preferred middleware solution for connection pooling because it is easy to set up, not too difficult to manage, and primarily serves as a connection pooler without any other functions.
32-1	13666-13668	If	_	
32-2	13669-13670	a	_	
32-3	13671-13674	web	_	
32-4	13675-13682	service	_	
32-5	13683-13685	is	_	
32-6	13686-13694	designed	_	
32-7	13695-13697	to	_	
32-8	13698-13702	make	_	
32-9	13703-13704	a	_	
32-10	13705-13708	lot	_	
32-11	13709-13711	of	_	
32-12	13712-13716	read	_	
32-13	13717-13720	and	_	
32-14	13721-13726	write	_	
32-15	13727-13734	queries	_	
32-16	13735-13737	to	_	
32-17	13738-13739	a	_	
32-18	13740-13748	database	_	
32-19	13748-13749	,	_	
32-20	13750-13754	then	_	
32-21	13755-13758	you	_	
32-22	13759-13763	have	_	
32-23	13764-13772	multiple	_	
32-24	13773-13782	instances	_	
32-25	13783-13785	of	_	
32-26	13786-13787	a	_	
32-27	13788-13796	Postgres	_	
32-28	13797-13805	database	_	
32-29	13806-13808	in	_	
32-30	13809-13814	place	_	
32-31	13815-13817	to	_	
32-32	13818-13822	take	_	
32-33	13823-13827	care	_	
32-34	13828-13830	of	_	
32-35	13831-13836	write	_	
32-36	13837-13844	queries	_	
32-37	13845-13849	from	_	
32-38	13850-13857	clients	_	
32-39	13858-13865	through	_	
32-40	13866-13867	a	_	
32-41	13868-13872	load	_	
32-42	13873-13881	balancer	_	
32-43	13882-13886	such	_	
32-44	13887-13889	as	_	
32-45	13890-13899	pgpool-II	_	
32-46	13900-13905	while	_	
32-47	13906-13915	in-memory	_	
32-48	13916-13923	caching	_	
32-49	13924-13927	can	_	
32-50	13928-13930	be	_	
32-51	13931-13935	used	_	
32-52	13936-13938	to	_	
32-53	13939-13947	optimize	_	
32-54	13948-13952	read	_	
32-55	13953-13960	queries	_	
32-56	13960-13961	.	_	
32-57	13962-13969	Despite	_	
32-58	13970-13973	the	_	
32-59	13974-13983	pgpool-II	_	
32-60	13984-13991	ability	_	
32-61	13992-13994	to	_	
32-62	13995-14003	function	_	
32-63	14004-14006	as	_	
32-64	14007-14008	a	_	
32-65	14009-14015	loader	_	
32-66	14016-14024	balancer	_	
32-67	14025-14028	and	_	
32-68	14029-14039	connection	_	
32-69	14040-14046	pooler	_	
32-70	14046-14047	,	_	
32-71	14048-14057	pgbouncer	_	
32-72	14058-14060	is	_	
32-73	14061-14064	the	_	
32-74	14065-14074	preferred	_	
32-75	14075-14085	middleware	_	
32-76	14086-14094	solution	_	
32-77	14095-14098	for	_	
32-78	14099-14109	connection	_	
32-79	14110-14117	pooling	_	
32-80	14118-14125	because	_	
32-81	14126-14128	it	_	
32-82	14129-14131	is	_	
32-83	14132-14136	easy	_	
32-84	14137-14139	to	_	
32-85	14140-14143	set	_	
32-86	14144-14146	up	_	
32-87	14146-14147	,	_	
32-88	14148-14151	not	_	
32-89	14152-14155	too	_	
32-90	14156-14165	difficult	_	
32-91	14166-14168	to	_	
32-92	14169-14175	manage	_	
32-93	14175-14176	,	_	
32-94	14177-14180	and	_	
32-95	14181-14190	primarily	_	
32-96	14191-14197	serves	_	
32-97	14198-14200	as	_	
32-98	14201-14202	a	_	
32-99	14203-14213	connection	_	
32-100	14214-14220	pooler	_	
32-101	14221-14228	without	_	
32-102	14229-14232	any	_	
32-103	14233-14238	other	_	
32-104	14239-14248	functions	_	
32-105	14248-14249	.	_	

#Text=Tags: connection pooling, databases, pgbouncer, postgreSQL The Stack Overflow Podcast is a weekly conversation about working in software development, learning to code, and the art and culture of computer programming. Related newsletter October 23, 2020 The Overflow #44: Machine learning in production
33-1	14250-14254	Tags	_	
33-2	14254-14255	:	_	
33-3	14256-14266	connection	_	
33-4	14267-14274	pooling	_	
33-5	14274-14275	,	_	
33-6	14276-14285	databases	_	
33-7	14285-14286	,	_	
33-8	14287-14296	pgbouncer	_	
33-9	14296-14297	,	_	
33-10	14298-14308	postgreSQL	_	
33-11	14309-14312	The	_	
33-12	14313-14318	Stack	_	
33-13	14319-14327	Overflow	_	
33-14	14328-14335	Podcast	_	
33-15	14336-14338	is	_	
33-16	14339-14340	a	_	
33-17	14341-14347	weekly	_	
33-18	14348-14360	conversation	_	
33-19	14361-14366	about	_	
33-20	14367-14374	working	_	
33-21	14375-14377	in	_	
33-22	14378-14386	software	_	
33-23	14387-14398	development	_	
33-24	14398-14399	,	_	
33-25	14400-14408	learning	_	
33-26	14409-14411	to	_	
33-27	14412-14416	code	_	
33-28	14416-14417	,	_	
33-29	14418-14421	and	_	
33-30	14422-14425	the	_	
33-31	14426-14429	art	_	
33-32	14430-14433	and	_	
33-33	14434-14441	culture	_	
33-34	14442-14444	of	_	
33-35	14445-14453	computer	_	
33-36	14454-14465	programming	_	
33-37	14465-14466	.	_	
33-38	14467-14474	Related	_	
33-39	14475-14485	newsletter	_	
33-40	14486-14493	October	_	
33-41	14494-14496	23	_	
33-42	14496-14497	,	_	
33-43	14498-14502	2020	_	
33-44	14503-14506	The	_	
33-45	14507-14515	Overflow	_	
33-46	14516-14519	#44	_	
33-47	14519-14520	:	_	
33-48	14521-14528	Machine	_	
33-49	14529-14537	learning	_	
33-50	14538-14540	in	_	
33-51	14541-14551	production	_	

#Text=Welcome to ISSUE #44 of the Overflow! This newsletter is by developers, for developers, written and curated by the Stack Overflow team and Cassidy Williams at Netlify. This week, get in the fast lane and start pooling your database connections, make a CPU out of electronic components drawn by hand on paper, and learn to toggle multiple property… Medi Madelen Gwosdz Content Strategist code-for-a-living January 14, 2021 Have the tables turned on NoSQL?
34-1	14552-14559	Welcome	_	
34-2	14560-14562	to	_	
34-3	14563-14568	ISSUE	_	
34-4	14569-14572	#44	_	
34-5	14573-14575	of	_	
34-6	14576-14579	the	_	
34-7	14580-14588	Overflow	_	
34-8	14588-14589	!	_	
34-9	14590-14594	This	_	
34-10	14595-14605	newsletter	_	
34-11	14606-14608	is	_	
34-12	14609-14611	by	_	
34-13	14612-14622	developers	_	
34-14	14622-14623	,	_	
34-15	14624-14627	for	_	
34-16	14628-14638	developers	_	
34-17	14638-14639	,	_	
34-18	14640-14647	written	_	
34-19	14648-14651	and	_	
34-20	14652-14659	curated	_	
34-21	14660-14662	by	_	
34-22	14663-14666	the	_	
34-23	14667-14672	Stack	_	
34-24	14673-14681	Overflow	_	
34-25	14682-14686	team	_	
34-26	14687-14690	and	_	
34-27	14690-14691	 	_	
34-28	14691-14698	Cassidy	_	
34-29	14699-14707	Williams	_	
34-30	14707-14708	 	_	
34-31	14708-14710	at	_	
34-32	14710-14711	 	_	
34-33	14711-14718	Netlify	_	
34-34	14718-14719	.	_	
34-35	14720-14724	This	_	
34-36	14725-14729	week	_	
34-37	14729-14730	,	_	
34-38	14731-14734	get	_	
34-39	14735-14737	in	_	
34-40	14738-14741	the	_	
34-41	14742-14746	fast	_	
34-42	14747-14751	lane	_	
34-43	14752-14755	and	_	
34-44	14756-14761	start	_	
34-45	14762-14769	pooling	_	
34-46	14770-14774	your	_	
34-47	14775-14783	database	_	
34-48	14784-14795	connections	_	
34-49	14795-14796	,	_	
34-50	14797-14801	make	_	
34-51	14802-14803	a	_	
34-52	14804-14807	CPU	_	
34-53	14808-14811	out	_	
34-54	14812-14814	of	_	
34-55	14815-14825	electronic	_	
34-56	14826-14836	components	_	
34-57	14837-14842	drawn	_	
34-58	14843-14845	by	_	
34-59	14846-14850	hand	_	
34-60	14851-14853	on	_	
34-61	14854-14859	paper	_	
34-62	14859-14860	,	_	
34-63	14861-14864	and	_	
34-64	14865-14870	learn	_	
34-65	14871-14873	to	_	
34-66	14874-14880	toggle	_	
34-67	14881-14889	multiple	_	
34-68	14890-14898	property	_	
34-69	14898-14899	…	_	
34-70	14900-14904	Medi	_	
34-71	14905-14912	Madelen	_	
34-72	14913-14919	Gwosdz	_	
34-73	14920-14927	Content	_	
34-74	14928-14938	Strategist	_	
34-75	14939-14956	code-for-a-living	_	
34-76	14957-14964	January	_	
34-77	14965-14967	14	_	
34-78	14967-14968	,	_	
34-79	14969-14973	2021	_	
34-80	14974-14978	Have	_	
34-81	14979-14982	the	_	
34-82	14983-14989	tables	_	
34-83	14990-14996	turned	_	
34-84	14997-14999	on	_	
34-85	15000-15005	NoSQL	_	
34-86	15005-15006	?	_	

#Text=NoSQL was the next big thing in system architecture in 2011, but overall interest in it has plateaued recently. What is NoSQL, what does it have to do with modern development, and is it worth implementing in your project? John Biggs and Ryan Donovan code-for-a-living March 3, 2021 Best practices can slow your application down In order to get the most performant site possible when building the codebase for our public Stack Overflow site, we didn’t always follow best practices.
35-1	15007-15012	NoSQL	_	
35-2	15013-15016	was	_	
35-3	15017-15020	the	_	
35-4	15021-15025	next	_	
35-5	15026-15029	big	_	
35-6	15030-15035	thing	_	
35-7	15036-15038	in	_	
35-8	15039-15045	system	_	
35-9	15046-15058	architecture	_	
35-10	15059-15061	in	_	
35-11	15062-15066	2011	_	
35-12	15066-15067	,	_	
35-13	15068-15071	but	_	
35-14	15072-15079	overall	_	
35-15	15080-15088	interest	_	
35-16	15089-15091	in	_	
35-17	15092-15094	it	_	
35-18	15095-15098	has	_	
35-19	15099-15108	plateaued	_	
35-20	15109-15117	recently	_	
35-21	15117-15118	.	_	
35-22	15119-15123	What	_	
35-23	15124-15126	is	_	
35-24	15127-15132	NoSQL	_	
35-25	15132-15133	,	_	
35-26	15134-15138	what	_	
35-27	15139-15143	does	_	
35-28	15144-15146	it	_	
35-29	15147-15151	have	_	
35-30	15152-15154	to	_	
35-31	15155-15157	do	_	
35-32	15158-15162	with	_	
35-33	15163-15169	modern	_	
35-34	15170-15181	development	_	
35-35	15181-15182	,	_	
35-36	15183-15186	and	_	
35-37	15187-15189	is	_	
35-38	15190-15192	it	_	
35-39	15193-15198	worth	_	
35-40	15199-15211	implementing	_	
35-41	15212-15214	in	_	
35-42	15215-15219	your	_	
35-43	15220-15227	project	_	
35-44	15227-15228	?	_	
35-45	15229-15233	John	_	
35-46	15234-15239	Biggs	_	
35-47	15240-15243	and	_	
35-48	15244-15248	Ryan	_	
35-49	15249-15256	Donovan	_	
35-50	15257-15274	code-for-a-living	_	
35-51	15275-15280	March	_	
35-52	15281-15282	3	_	
35-53	15282-15283	,	_	
35-54	15284-15288	2021	_	
35-55	15289-15293	Best	_	
35-56	15294-15303	practices	_	
35-57	15304-15307	can	_	
35-58	15308-15312	slow	_	
35-59	15313-15317	your	_	
35-60	15318-15329	application	_	
35-61	15330-15334	down	_	
35-62	15335-15337	In	_	
35-63	15338-15343	order	_	
35-64	15344-15346	to	_	
35-65	15347-15350	get	_	
35-66	15351-15354	the	_	
35-67	15355-15359	most	_	
35-68	15360-15370	performant	_	
35-69	15371-15375	site	_	
35-70	15376-15384	possible	_	
35-71	15385-15389	when	_	
35-72	15390-15398	building	_	
35-73	15399-15402	the	_	
35-74	15403-15411	codebase	_	
35-75	15412-15415	for	_	
35-76	15416-15419	our	_	
35-77	15420-15426	public	_	
35-78	15427-15432	Stack	_	
35-79	15433-15441	Overflow	_	
35-80	15442-15446	site	_	
35-81	15446-15447	,	_	
35-82	15448-15450	we	_	
35-83	15451-15455	didn	_	
35-84	15455-15456	’	_	
35-85	15456-15457	t	_	
35-86	15458-15464	always	_	
35-87	15465-15471	follow	_	
35-88	15472-15476	best	_	
35-89	15477-15486	practices	_	
35-90	15486-15487	.	_	

#Text=Roberta Arcoverde and Ryan Donovan code-for-a-living February 24, 2021 What I wish I had known about single page applications Single page apps are all the rage today, but they don't always operate the same as traditional web pages. Michael Pratt 11 Comments
36-1	15488-15495	Roberta	_	
36-2	15496-15505	Arcoverde	_	
36-3	15506-15509	and	_	
36-4	15510-15514	Ryan	_	
36-5	15515-15522	Donovan	_	
36-6	15523-15540	code-for-a-living	_	
36-7	15541-15549	February	_	
36-8	15550-15552	24	_	
36-9	15552-15553	,	_	
36-10	15554-15558	2021	_	
36-11	15559-15563	What	_	
36-12	15564-15565	I	_	
36-13	15566-15570	wish	_	
36-14	15571-15572	I	_	
36-15	15573-15576	had	_	
36-16	15577-15582	known	_	
36-17	15583-15588	about	_	
36-18	15589-15595	single	_	
36-19	15596-15600	page	_	
36-20	15601-15613	applications	_	
36-21	15614-15620	Single	_	
36-22	15621-15625	page	_	
36-23	15626-15630	apps	_	
36-24	15631-15634	are	_	
36-25	15635-15638	all	_	
36-26	15639-15642	the	_	
36-27	15643-15647	rage	_	
36-28	15648-15653	today	_	
36-29	15653-15654	,	_	
36-30	15655-15658	but	_	
36-31	15659-15663	they	_	
36-32	15664-15669	don't	_	
36-33	15670-15676	always	_	
36-34	15677-15684	operate	_	
36-35	15685-15688	the	_	
36-36	15689-15693	same	_	
36-37	15694-15696	as	_	
36-38	15697-15708	traditional	_	
36-39	15709-15712	web	_	
36-40	15713-15718	pages	_	
36-41	15718-15719	.	_	
36-42	15720-15727	Michael	_	
36-43	15728-15733	Pratt	_	
36-44	15734-15736	11	_	
36-45	15737-15745	Comments	_	

#Text=Iwouldliketonotprovidemyname says: 14 Oct 20 at 11:20 As you see, transaction throughput increased from 486 transactions per second to 566 transactions per second. With the help of pgbouncer, transaction throughput improved by approximately 60%.
37-1	15746-15774	Iwouldliketonotprovidemyname	_	
37-2	15775-15779	says	_	
37-3	15779-15780	:	_	
37-4	15781-15783	14	_	
37-5	15784-15787	Oct	_	
37-6	15788-15790	20	_	
37-7	15791-15793	at	_	
37-8	15794-15796	11	_	
37-9	15796-15797	:	_	
37-10	15797-15799	20	_	
37-11	15800-15802	As	_	
37-12	15803-15806	you	_	
37-13	15807-15810	see	_	
37-14	15810-15811	,	_	
37-15	15812-15823	transaction	_	
37-16	15824-15834	throughput	_	
37-17	15835-15844	increased	_	
37-18	15845-15849	from	_	
37-19	15850-15853	486	_	
37-20	15854-15866	transactions	_	
37-21	15867-15870	per	_	
37-22	15871-15877	second	_	
37-23	15878-15880	to	_	
37-24	15881-15884	566	_	
37-25	15885-15897	transactions	_	
37-26	15898-15901	per	_	
37-27	15902-15908	second	_	
37-28	15908-15909	.	_	
37-29	15910-15914	With	_	
37-30	15915-15918	the	_	
37-31	15919-15923	help	_	
37-32	15924-15926	of	_	
37-33	15927-15936	pgbouncer	_	
37-34	15936-15937	,	_	
37-35	15938-15949	transaction	_	
37-36	15950-15960	throughput	_	
37-37	15961-15969	improved	_	
37-38	15970-15972	by	_	
37-39	15973-15986	approximately	_	
37-40	15987-15990	60%	_	
37-41	15990-15991	.	_	

#Text=That 60% is a bit huge. The increase of 80 TPS is more like 16% of the initial 486 TPS. The 75% increase for pgpool-II is also a bit large. Reply Tien Do says: 21 Oct 20 at 6:35 Yeah, how is it 60% and 75%? Reply CanadianLuke says: 22 Oct 20 at 6:55 A week with no reply to simple math… Not looking good…
38-1	15992-15996	That	_	
38-2	15997-16000	60%	_	
38-3	16001-16003	is	_	
38-4	16004-16005	a	_	
38-5	16006-16009	bit	_	
38-6	16010-16014	huge	_	
38-7	16014-16015	.	_	
38-8	16016-16019	The	_	
38-9	16020-16028	increase	_	
38-10	16029-16031	of	_	
38-11	16032-16034	80	_	
38-12	16035-16038	TPS	_	
38-13	16039-16041	is	_	
38-14	16042-16046	more	_	
38-15	16047-16051	like	_	
38-16	16052-16055	16%	_	
38-17	16056-16058	of	_	
38-18	16059-16062	the	_	
38-19	16063-16070	initial	_	
38-20	16071-16074	486	_	
38-21	16075-16078	TPS	_	
38-22	16078-16079	.	_	
38-23	16080-16083	The	_	
38-24	16084-16087	75%	_	
38-25	16088-16096	increase	_	
38-26	16097-16100	for	_	
38-27	16101-16110	pgpool-II	_	
38-28	16111-16113	is	_	
38-29	16114-16118	also	_	
38-30	16119-16120	a	_	
38-31	16121-16124	bit	_	
38-32	16125-16130	large	_	
38-33	16130-16131	.	_	
38-34	16132-16137	Reply	_	
38-35	16138-16142	Tien	_	
38-36	16143-16145	Do	_	
38-37	16146-16150	says	_	
38-38	16150-16151	:	_	
38-39	16152-16154	21	_	
38-40	16155-16158	Oct	_	
38-41	16159-16161	20	_	
38-42	16162-16164	at	_	
38-43	16165-16166	6	_	
38-44	16166-16167	:	_	
38-45	16167-16169	35	_	
38-46	16170-16174	Yeah	_	
38-47	16174-16175	,	_	
38-48	16176-16179	how	_	
38-49	16180-16182	is	_	
38-50	16183-16185	it	_	
38-51	16186-16189	60%	_	
38-52	16190-16193	and	_	
38-53	16194-16197	75%	_	
38-54	16197-16198	?	_	
38-55	16199-16204	Reply	_	
38-56	16205-16217	CanadianLuke	_	
38-57	16218-16222	says	_	
38-58	16222-16223	:	_	
38-59	16224-16226	22	_	
38-60	16227-16230	Oct	_	
38-61	16231-16233	20	_	
38-62	16234-16236	at	_	
38-63	16237-16238	6	_	
38-64	16238-16239	:	_	
38-65	16239-16241	55	_	
38-66	16242-16243	A	_	
38-67	16244-16248	week	_	
38-68	16249-16253	with	_	
38-69	16254-16256	no	_	
38-70	16257-16262	reply	_	
38-71	16263-16265	to	_	
38-72	16266-16272	simple	_	
38-73	16273-16277	math	_	
38-74	16277-16278	…	_	
38-75	16279-16282	Not	_	
38-76	16283-16290	looking	_	
38-77	16291-16295	good	_	
38-78	16295-16296	…	_	

#Text=Reply Travis says: 14 Oct 20 at 3:49
39-1	16297-16302	Reply	_	
39-2	16303-16309	Travis	_	
39-3	16310-16314	says	_	
39-4	16314-16315	:	_	
39-5	16316-16318	14	_	
39-6	16319-16322	Oct	_	
39-7	16323-16325	20	_	
39-8	16326-16328	at	_	
39-9	16329-16330	3	_	
39-10	16330-16331	:	_	
39-11	16331-16333	49	_	

#Text=It is certainly an interesting technique, although there are a whole host of unintended consequences associated with this approach that would be well to mention. Pooling transactions to memory prior to pushing them to the database has very serious implications with regards to data integrity, as one main example. This approach also will require a very large amount of server memory to be used; in instances where memory is shared across multiple nodes, this can be problematic if there is a node failure. So, while it may be the case that more transactions per second occur, the risk seems to outweigh any gains. Reply Michael Aboagye says: 19 Oct 20 at 7:23 @Travis, please I referred to pooling connection in this article. But do you know pgpool supports postgres stream replication? In addition, the presence of transaction log ensures data integrity is maintained.
40-1	16334-16336	It	_	
40-2	16337-16339	is	_	
40-3	16340-16349	certainly	_	
40-4	16350-16352	an	_	
40-5	16353-16364	interesting	_	
40-6	16365-16374	technique	_	
40-7	16374-16375	,	_	
40-8	16376-16384	although	_	
40-9	16385-16390	there	_	
40-10	16391-16394	are	_	
40-11	16395-16396	a	_	
40-12	16397-16402	whole	_	
40-13	16403-16407	host	_	
40-14	16408-16410	of	_	
40-15	16411-16421	unintended	_	
40-16	16422-16434	consequences	_	
40-17	16435-16445	associated	_	
40-18	16446-16450	with	_	
40-19	16451-16455	this	_	
40-20	16456-16464	approach	_	
40-21	16465-16469	that	_	
40-22	16470-16475	would	_	
40-23	16476-16478	be	_	
40-24	16479-16483	well	_	
40-25	16484-16486	to	_	
40-26	16487-16494	mention	_	
40-27	16494-16495	.	_	
40-28	16496-16503	Pooling	_	
40-29	16504-16516	transactions	_	
40-30	16517-16519	to	_	
40-31	16520-16526	memory	_	
40-32	16527-16532	prior	_	
40-33	16533-16535	to	_	
40-34	16536-16543	pushing	_	
40-35	16544-16548	them	_	
40-36	16549-16551	to	_	
40-37	16552-16555	the	_	
40-38	16556-16564	database	_	
40-39	16565-16568	has	_	
40-40	16569-16573	very	_	
40-41	16574-16581	serious	_	
40-42	16582-16594	implications	_	
40-43	16595-16599	with	_	
40-44	16600-16607	regards	_	
40-45	16608-16610	to	_	
40-46	16611-16615	data	_	
40-47	16616-16625	integrity	_	
40-48	16625-16626	,	_	
40-49	16627-16629	as	_	
40-50	16630-16633	one	_	
40-51	16634-16638	main	_	
40-52	16639-16646	example	_	
40-53	16646-16647	.	_	
40-54	16648-16652	This	_	
40-55	16653-16661	approach	_	
40-56	16662-16666	also	_	
40-57	16667-16671	will	_	
40-58	16672-16679	require	_	
40-59	16680-16681	a	_	
40-60	16682-16686	very	_	
40-61	16687-16692	large	_	
40-62	16693-16699	amount	_	
40-63	16700-16702	of	_	
40-64	16703-16709	server	_	
40-65	16710-16716	memory	_	
40-66	16717-16719	to	_	
40-67	16720-16722	be	_	
40-68	16723-16727	used	_	
40-69	16727-16728	;	_	
40-70	16729-16731	in	_	
40-71	16732-16741	instances	_	
40-72	16742-16747	where	_	
40-73	16748-16754	memory	_	
40-74	16755-16757	is	_	
40-75	16758-16764	shared	_	
40-76	16765-16771	across	_	
40-77	16772-16780	multiple	_	
40-78	16781-16786	nodes	_	
40-79	16786-16787	,	_	
40-80	16788-16792	this	_	
40-81	16793-16796	can	_	
40-82	16797-16799	be	_	
40-83	16800-16811	problematic	_	
40-84	16812-16814	if	_	
40-85	16815-16820	there	_	
40-86	16821-16823	is	_	
40-87	16824-16825	a	_	
40-88	16826-16830	node	_	
40-89	16831-16838	failure	_	
40-90	16838-16839	.	_	
40-91	16840-16842	So	_	
40-92	16842-16843	,	_	
40-93	16844-16849	while	_	
40-94	16850-16852	it	_	
40-95	16853-16856	may	_	
40-96	16857-16859	be	_	
40-97	16860-16863	the	_	
40-98	16864-16868	case	_	
40-99	16869-16873	that	_	
40-100	16874-16878	more	_	
40-101	16879-16891	transactions	_	
40-102	16892-16895	per	_	
40-103	16896-16902	second	_	
40-104	16903-16908	occur	_	
40-105	16908-16909	,	_	
40-106	16910-16913	the	_	
40-107	16914-16918	risk	_	
40-108	16919-16924	seems	_	
40-109	16925-16927	to	_	
40-110	16928-16936	outweigh	_	
40-111	16937-16940	any	_	
40-112	16941-16946	gains	_	
40-113	16946-16947	.	_	
40-114	16948-16953	Reply	_	
40-115	16954-16961	Michael	_	
40-116	16962-16969	Aboagye	_	
40-117	16970-16974	says	_	
40-118	16974-16975	:	_	
40-119	16976-16978	19	_	
40-120	16979-16982	Oct	_	
40-121	16983-16985	20	_	
40-122	16986-16988	at	_	
40-123	16989-16990	7	_	
40-124	16990-16991	:	_	
40-125	16991-16993	23	_	
40-126	16994-16995	@	_	
40-127	16995-17001	Travis	_	
40-128	17001-17002	,	_	
40-129	17003-17009	please	_	
40-130	17010-17011	I	_	
40-131	17012-17020	referred	_	
40-132	17021-17023	to	_	
40-133	17024-17031	pooling	_	
40-134	17032-17042	connection	_	
40-135	17043-17045	in	_	
40-136	17046-17050	this	_	
40-137	17051-17058	article	_	
40-138	17058-17059	.	_	
40-139	17060-17063	But	_	
40-140	17064-17066	do	_	
40-141	17067-17070	you	_	
40-142	17071-17075	know	_	
40-143	17076-17082	pgpool	_	
40-144	17083-17091	supports	_	
40-145	17092-17100	postgres	_	
40-146	17101-17107	stream	_	
40-147	17108-17119	replication	_	
40-148	17119-17120	?	_	
40-149	17121-17123	In	_	
40-150	17124-17132	addition	_	
40-151	17132-17133	,	_	
40-152	17134-17137	the	_	
40-153	17138-17146	presence	_	
40-154	17147-17149	of	_	
40-155	17150-17161	transaction	_	
40-156	17162-17165	log	_	
40-157	17166-17173	ensures	_	
40-158	17174-17178	data	_	
40-159	17179-17188	integrity	_	
40-160	17189-17191	is	_	
40-161	17192-17202	maintained	_	
40-162	17202-17203	.	_	

#Text=Even without in the absence of pgpool cluster, postgres supports replication concepts such as synchronous and asynchronous replication to prevent data loss. Reply Galletto says: 22 Oct 20 at 9:54
41-1	17204-17208	Even	_	
41-2	17209-17216	without	_	
41-3	17217-17219	in	_	
41-4	17220-17223	the	_	
41-5	17224-17231	absence	_	
41-6	17232-17234	of	_	
41-7	17235-17241	pgpool	_	
41-8	17242-17249	cluster	_	
41-9	17249-17250	,	_	
41-10	17251-17259	postgres	_	
41-11	17260-17268	supports	_	
41-12	17269-17280	replication	_	
41-13	17281-17289	concepts	_	
41-14	17290-17294	such	_	
41-15	17295-17297	as	_	
41-16	17298-17309	synchronous	_	
41-17	17310-17313	and	_	
41-18	17314-17326	asynchronous	_	
41-19	17327-17338	replication	_	
41-20	17339-17341	to	_	
41-21	17342-17349	prevent	_	
41-22	17350-17354	data	_	
41-23	17355-17359	loss	_	
41-24	17359-17360	.	_	
41-25	17361-17366	Reply	_	
41-26	17367-17375	Galletto	_	
41-27	17376-17380	says	_	
41-28	17380-17381	:	_	
41-29	17382-17384	22	_	
41-30	17385-17388	Oct	_	
41-31	17389-17391	20	_	
41-32	17392-17394	at	_	
41-33	17395-17396	9	_	
41-34	17396-17397	:	_	
41-35	17397-17399	54	_	

#Text=Maybe I’m missing something entirely, but I thought connection pooling has been the default in .NET for many years… Correct? Reply Nilesh says: 16 Oct 20 at 11:19 @Travis — The article talks about pooling connections but mentions no such thing as pooling transactions in memory .
42-1	17400-17405	Maybe	_	
42-2	17406-17407	I	_	
42-3	17407-17408	’	_	
42-4	17408-17409	m	_	
42-5	17410-17417	missing	_	
42-6	17418-17427	something	_	
42-7	17428-17436	entirely	_	
42-8	17436-17437	,	_	
42-9	17438-17441	but	_	
42-10	17442-17443	I	_	
42-11	17444-17451	thought	_	
42-12	17452-17462	connection	_	
42-13	17463-17470	pooling	_	
42-14	17471-17474	has	_	
42-15	17475-17479	been	_	
42-16	17480-17483	the	_	
42-17	17484-17491	default	_	
42-18	17492-17494	in	_	
42-19	17495-17496	.	_	
42-20	17496-17499	NET	_	
42-21	17500-17503	for	_	
42-22	17504-17508	many	_	
42-23	17509-17514	years	_	
42-24	17514-17515	…	_	
42-25	17516-17523	Correct	_	
42-26	17523-17524	?	_	
42-27	17525-17530	Reply	_	
42-28	17531-17537	Nilesh	_	
42-29	17538-17542	says	_	
42-30	17542-17543	:	_	
42-31	17544-17546	16	_	
42-32	17547-17550	Oct	_	
42-33	17551-17553	20	_	
42-34	17554-17556	at	_	
42-35	17557-17559	11	_	
42-36	17559-17560	:	_	
42-37	17560-17562	19	_	
42-38	17563-17564	@	_	
42-39	17564-17570	Travis	_	
42-40	17571-17572	—	_	
42-41	17573-17576	The	_	
42-42	17577-17584	article	_	
42-43	17585-17590	talks	_	
42-44	17591-17596	about	_	
42-45	17597-17604	pooling	_	
42-46	17605-17616	connections	_	
42-47	17617-17620	but	_	
42-48	17621-17629	mentions	_	
42-49	17630-17632	no	_	
42-50	17633-17637	such	_	
42-51	17638-17643	thing	_	
42-52	17644-17646	as	_	
42-53	17647-17654	pooling	_	
42-54	17655-17667	transactions	_	
42-55	17668-17670	in	_	
42-56	17671-17677	memory	_	
42-57	17678-17679	.	_	

#Text=I understand the static memory footprint that postgres has on the server would increase but I can’t see how this would lead to data integrity issues. Am I missing anything ? Reply Michael Aboagye says: 19 Oct 20 at 7:24 Thanks for your comments, Nilesh. Reply Jeff Dafoe says: 22 Oct 20 at 5:21
43-1	17680-17681	I	_	
43-2	17682-17692	understand	_	
43-3	17693-17696	the	_	
43-4	17697-17703	static	_	
43-5	17704-17710	memory	_	
43-6	17711-17720	footprint	_	
43-7	17721-17725	that	_	
43-8	17726-17734	postgres	_	
43-9	17735-17738	has	_	
43-10	17739-17741	on	_	
43-11	17742-17745	the	_	
43-12	17746-17752	server	_	
43-13	17753-17758	would	_	
43-14	17759-17767	increase	_	
43-15	17768-17771	but	_	
43-16	17772-17773	I	_	
43-17	17774-17777	can	_	
43-18	17777-17778	’	_	
43-19	17778-17779	t	_	
43-20	17780-17783	see	_	
43-21	17784-17787	how	_	
43-22	17788-17792	this	_	
43-23	17793-17798	would	_	
43-24	17799-17803	lead	_	
43-25	17804-17806	to	_	
43-26	17807-17811	data	_	
43-27	17812-17821	integrity	_	
43-28	17822-17828	issues	_	
43-29	17828-17829	.	_	
43-30	17830-17832	Am	_	
43-31	17833-17834	I	_	
43-32	17835-17842	missing	_	
43-33	17843-17851	anything	_	
43-34	17852-17853	?	_	
43-35	17854-17859	Reply	_	
43-36	17860-17867	Michael	_	
43-37	17868-17875	Aboagye	_	
43-38	17876-17880	says	_	
43-39	17880-17881	:	_	
43-40	17882-17884	19	_	
43-41	17885-17888	Oct	_	
43-42	17889-17891	20	_	
43-43	17892-17894	at	_	
43-44	17895-17896	7	_	
43-45	17896-17897	:	_	
43-46	17897-17899	24	_	
43-47	17900-17906	Thanks	_	
43-48	17907-17910	for	_	
43-49	17911-17915	your	_	
43-50	17916-17924	comments	_	
43-51	17924-17925	,	_	
43-52	17926-17932	Nilesh	_	
43-53	17932-17933	.	_	
43-54	17934-17939	Reply	_	
43-55	17940-17944	Jeff	_	
43-56	17945-17950	Dafoe	_	
43-57	17951-17955	says	_	
43-58	17955-17956	:	_	
43-59	17957-17959	22	_	
43-60	17960-17963	Oct	_	
43-61	17964-17966	20	_	
43-62	17967-17969	at	_	
43-63	17970-17971	5	_	
43-64	17971-17972	:	_	
43-65	17972-17974	21	_	

#Text=One thing to be aware of with connection pooling, particularly under PG, is that a reused pool connection may not be in the same initial state as a brand new connection from the backend. Session variables persist across shared connections, data may not be cleared from temp tables, and some types of errors are not cleared until the backend is recycled. It’s important that the code that is establishing the connection be written with this in mind, it must perform initialization that would not be necessary if the backend were fresh and it should also test the connection to make sure it can actually be queried from. Reply Matthew E says: 26 Oct 20 at 3:23 right on, Nilesh and Dafoe. Others: #include Reply Emmanuel Casas says: 21 Jan 21 at 5:48
44-1	17975-17978	One	_	
44-2	17979-17984	thing	_	
44-3	17985-17987	to	_	
44-4	17988-17990	be	_	
44-5	17991-17996	aware	_	
44-6	17997-17999	of	_	
44-7	18000-18004	with	_	
44-8	18005-18015	connection	_	
44-9	18016-18023	pooling	_	
44-10	18023-18024	,	_	
44-11	18025-18037	particularly	_	
44-12	18038-18043	under	_	
44-13	18044-18046	PG	_	
44-14	18046-18047	,	_	
44-15	18048-18050	is	_	
44-16	18051-18055	that	_	
44-17	18056-18057	a	_	
44-18	18058-18064	reused	_	
44-19	18065-18069	pool	_	
44-20	18070-18080	connection	_	
44-21	18081-18084	may	_	
44-22	18085-18088	not	_	
44-23	18089-18091	be	_	
44-24	18092-18094	in	_	
44-25	18095-18098	the	_	
44-26	18099-18103	same	_	
44-27	18104-18111	initial	_	
44-28	18112-18117	state	_	
44-29	18118-18120	as	_	
44-30	18121-18122	a	_	
44-31	18123-18128	brand	_	
44-32	18129-18132	new	_	
44-33	18133-18143	connection	_	
44-34	18144-18148	from	_	
44-35	18149-18152	the	_	
44-36	18153-18160	backend	_	
44-37	18160-18161	.	_	
44-38	18162-18169	Session	_	
44-39	18170-18179	variables	_	
44-40	18180-18187	persist	_	
44-41	18188-18194	across	_	
44-42	18195-18201	shared	_	
44-43	18202-18213	connections	_	
44-44	18213-18214	,	_	
44-45	18215-18219	data	_	
44-46	18220-18223	may	_	
44-47	18224-18227	not	_	
44-48	18228-18230	be	_	
44-49	18231-18238	cleared	_	
44-50	18239-18243	from	_	
44-51	18244-18248	temp	_	
44-52	18249-18255	tables	_	
44-53	18255-18256	,	_	
44-54	18257-18260	and	_	
44-55	18261-18265	some	_	
44-56	18266-18271	types	_	
44-57	18272-18274	of	_	
44-58	18275-18281	errors	_	
44-59	18282-18285	are	_	
44-60	18286-18289	not	_	
44-61	18290-18297	cleared	_	
44-62	18298-18303	until	_	
44-63	18304-18307	the	_	
44-64	18308-18315	backend	_	
44-65	18316-18318	is	_	
44-66	18319-18327	recycled	_	
44-67	18327-18328	.	_	
44-68	18329-18331	It	_	
44-69	18331-18332	’	_	
44-70	18332-18333	s	_	
44-71	18334-18343	important	_	
44-72	18344-18348	that	_	
44-73	18349-18352	the	_	
44-74	18353-18357	code	_	
44-75	18358-18362	that	_	
44-76	18363-18365	is	_	
44-77	18366-18378	establishing	_	
44-78	18379-18382	the	_	
44-79	18383-18393	connection	_	
44-80	18394-18396	be	_	
44-81	18397-18404	written	_	
44-82	18405-18409	with	_	
44-83	18410-18414	this	_	
44-84	18415-18417	in	_	
44-85	18418-18422	mind	_	
44-86	18422-18423	,	_	
44-87	18424-18426	it	_	
44-88	18427-18431	must	_	
44-89	18432-18439	perform	_	
44-90	18440-18454	initialization	_	
44-91	18455-18459	that	_	
44-92	18460-18465	would	_	
44-93	18466-18469	not	_	
44-94	18470-18472	be	_	
44-95	18473-18482	necessary	_	
44-96	18483-18485	if	_	
44-97	18486-18489	the	_	
44-98	18490-18497	backend	_	
44-99	18498-18502	were	_	
44-100	18503-18508	fresh	_	
44-101	18509-18512	and	_	
44-102	18513-18515	it	_	
44-103	18516-18522	should	_	
44-104	18523-18527	also	_	
44-105	18528-18532	test	_	
44-106	18533-18536	the	_	
44-107	18537-18547	connection	_	
44-108	18548-18550	to	_	
44-109	18551-18555	make	_	
44-110	18556-18560	sure	_	
44-111	18561-18563	it	_	
44-112	18564-18567	can	_	
44-113	18568-18576	actually	_	
44-114	18577-18579	be	_	
44-115	18580-18587	queried	_	
44-116	18588-18592	from	_	
44-117	18592-18593	.	_	
44-118	18594-18599	Reply	_	
44-119	18600-18607	Matthew	_	
44-120	18608-18609	E	_	
44-121	18610-18614	says	_	
44-122	18614-18615	:	_	
44-123	18616-18618	26	_	
44-124	18619-18622	Oct	_	
44-125	18623-18625	20	_	
44-126	18626-18628	at	_	
44-127	18629-18630	3	_	
44-128	18630-18631	:	_	
44-129	18631-18633	23	_	
44-130	18634-18639	right	_	
44-131	18640-18642	on	_	
44-132	18642-18643	,	_	
44-133	18644-18650	Nilesh	_	
44-134	18651-18654	and	_	
44-135	18655-18660	Dafoe	_	
44-136	18660-18661	.	_	
44-137	18662-18668	Others	_	
44-138	18668-18669	:	_	
44-139	18670-18671	#	_	
44-140	18671-18678	include	_	
44-141	18679-18684	Reply	_	
44-142	18685-18693	Emmanuel	_	
44-143	18694-18699	Casas	_	
44-144	18700-18704	says	_	
44-145	18704-18705	:	_	
44-146	18706-18708	21	_	
44-147	18709-18712	Jan	_	
44-148	18713-18715	21	_	
44-149	18716-18718	at	_	
44-150	18719-18720	5	_	
44-151	18720-18721	:	_	
44-152	18721-18723	48	_	

#Text=Im concern about the fact PGBENCH is based on http://www.tpc.org/tpcb/ which is obsolete, maybe im missing something here, any thoughts about this guys ? Is there a better way to measure the TPS in postgresql ? Reply Leave a Reply Cancel replyYour email address will not be published. Required fields are marked *Comment Name * Email * Website Save my name, email, and website in this browser for the next time I comment.
45-1	18724-18726	Im	_	
45-2	18727-18734	concern	_	
45-3	18735-18740	about	_	
45-4	18741-18744	the	_	
45-5	18745-18749	fact	_	
45-6	18750-18757	PGBENCH	_	
45-7	18758-18760	is	_	
45-8	18761-18766	based	_	
45-9	18767-18769	on	_	
45-10	18770-18774	http	_	
45-11	18774-18775	:	_	
45-12	18775-18776	/	_	
45-13	18776-18777	/	_	
45-14	18777-18788	www.tpc.org	_	
45-15	18788-18789	/	_	
45-16	18789-18793	tpcb	_	
45-17	18793-18794	/	_	
45-18	18795-18800	which	_	
45-19	18801-18803	is	_	
45-20	18804-18812	obsolete	_	
45-21	18812-18813	,	_	
45-22	18814-18819	maybe	_	
45-23	18820-18822	im	_	
45-24	18823-18830	missing	_	
45-25	18831-18840	something	_	
45-26	18841-18845	here	_	
45-27	18845-18846	,	_	
45-28	18847-18850	any	_	
45-29	18851-18859	thoughts	_	
45-30	18860-18865	about	_	
45-31	18866-18870	this	_	
45-32	18871-18875	guys	_	
45-33	18876-18877	?	_	
45-34	18878-18880	Is	_	
45-35	18881-18886	there	_	
45-36	18887-18888	a	_	
45-37	18889-18895	better	_	
45-38	18896-18899	way	_	
45-39	18900-18902	to	_	
45-40	18903-18910	measure	_	
45-41	18911-18914	the	_	
45-42	18915-18918	TPS	_	
45-43	18919-18921	in	_	
45-44	18922-18932	postgresql	_	
45-45	18933-18934	?	_	
45-46	18935-18940	Reply	_	
45-47	18941-18946	Leave	_	
45-48	18947-18948	a	_	
45-49	18949-18954	Reply	_	
45-50	18955-18961	Cancel	_	
45-51	18962-18971	replyYour	_	
45-52	18972-18977	email	_	
45-53	18978-18985	address	_	
45-54	18986-18990	will	_	
45-55	18991-18994	not	_	
45-56	18995-18997	be	_	
45-57	18998-19007	published	_	
45-58	19007-19008	.	_	
45-59	19009-19017	Required	_	
45-60	19018-19024	fields	_	
45-61	19025-19028	are	_	
45-62	19029-19035	marked	_	
45-63	19036-19037	*	_	
45-64	19037-19044	Comment	_	
45-65	19045-19049	Name	_	
45-66	19050-19051	*	_	
45-67	19052-19057	Email	_	
45-68	19058-19059	*	_	
45-69	19060-19067	Website	_	
45-70	19068-19072	Save	_	
45-71	19073-19075	my	_	
45-72	19076-19080	name	_	
45-73	19080-19081	,	_	
45-74	19082-19087	email	_	
45-75	19087-19088	,	_	
45-76	19089-19092	and	_	
45-77	19093-19100	website	_	
45-78	19101-19103	in	_	
45-79	19104-19108	this	_	
45-80	19109-19116	browser	_	
45-81	19117-19120	for	_	
45-82	19121-19124	the	_	
45-83	19125-19129	next	_	
45-84	19130-19134	time	_	
45-85	19135-19136	I	_	
45-86	19137-19144	comment	_	
45-87	19144-19145	.	_	

#Text=This site uses Akismet to reduce spam. Learn how your comment data is processed. © 2021 All Rights Reserved. Proudly powered by Wordpress Stack Overflow Questions Jobs Developer Jobs Directory Salary Calculator Products Teams Talent Advertising Enterprise Company
46-1	19146-19150	This	_	
46-2	19151-19155	site	_	
46-3	19156-19160	uses	_	
46-4	19161-19168	Akismet	_	
46-5	19169-19171	to	_	
46-6	19172-19178	reduce	_	
46-7	19179-19183	spam	_	
46-8	19183-19184	.	_	
46-9	19185-19190	Learn	_	
46-10	19191-19194	how	_	
46-11	19195-19199	your	_	
46-12	19200-19207	comment	_	
46-13	19208-19212	data	_	
46-14	19213-19215	is	_	
46-15	19216-19225	processed	_	
46-16	19225-19226	.	_	
46-17	19227-19228	©	_	
46-18	19229-19233	2021	_	
46-19	19234-19237	All	_	
46-20	19238-19244	Rights	_	
46-21	19245-19253	Reserved	_	
46-22	19253-19254	.	_	
46-23	19255-19262	Proudly	_	
46-24	19263-19270	powered	_	
46-25	19271-19273	by	_	
46-26	19274-19283	Wordpress	_	
46-27	19284-19289	Stack	_	
46-28	19290-19298	Overflow	_	
46-29	19299-19308	Questions	_	
46-30	19309-19313	Jobs	_	
46-31	19314-19323	Developer	_	
46-32	19324-19328	Jobs	_	
46-33	19329-19338	Directory	_	
46-34	19339-19345	Salary	_	
46-35	19346-19356	Calculator	_	
46-36	19357-19365	Products	_	
46-37	19366-19371	Teams	_	
46-38	19372-19378	Talent	_	
46-39	19379-19390	Advertising	_	
46-40	19391-19401	Enterprise	_	
46-41	19402-19409	Company	_	
